"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[52406],{452406:(e,i,t)=>{t.d(i,{Z:()=>y});var l=t(667294),o=t(545007),s=t(616550),a=t(883119),r=t(488792),n=t(989820),d=t(758339),c=t(144326),h=t(297728),_=t(410150),u=t(26456),p=t(451237),m=t(785893);function P({isOpen:e,onDismiss:i}){let t=(0,c.ZP)();return/*#__PURE__*/(0,m.jsx)(d.ZP,{accessibilityModalLabel:t.bt("Disabled Pin publishing error message modal", "Disabled Pin Publishing Error Message Modal", "disabledPinCreationModal.modal.accessibilityLabel", undefined, true),isOpen:e,mobileAccessibilityCloseIconLabel:t.bt("Close disabled publishing message modal", "Close disabled publishing message modal", "disabledPinCreationModal.modal.closeIconLabel", undefined, true),onDismiss:i,type:"DisabledPublishingModal",children:/*#__PURE__*/(0,m.jsxs)(a.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:6,paddingY:4,children:[/*#__PURE__*/(0,m.jsx)(a.X6,{children:t.bt("Oops...", "Oops...", "disabledPinCreationModal.modal.heading", undefined, true)}),/*#__PURE__*/(0,m.jsx)(a.xu,{paddingY:3,children:/*#__PURE__*/(0,m.jsx)(a.xv,{children:t.bt("Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "disabledPinCreationModal.modal.text", undefined, true)})}),/*#__PURE__*/(0,m.jsx)(a.xu,{paddingY:3,children:/*#__PURE__*/(0,m.jsx)(a.zx,{color:"red",onClick:()=>i(),size:"lg",text:t.bt("Dismiss", "Dismiss", "disabledPinCreationModal.button.dismiss", undefined, true)})})]})})}function b(e){let i=(0,c.ZP)(),{viewType:t,boardId:l,handleTouch:o}=e,s=i.bt("Board", "Board", "createMenuLinkButton.Create.Board.Label", undefined, true),r=i.bt("Section", "Section", "createMenuLinkButton.Create.Section.Label", undefined, true);return 5===t&&l?/*#__PURE__*/(0,m.jsx)(a.Tg,{href:`/board/${l}/create_section/`,onTap:o,rounding:2,children:/*#__PURE__*/(0,m.jsx)(a.xu,{"data-test-id":"addSectionButton",paddingY:2,children:/*#__PURE__*/(0,m.jsx)(a.X6,{size:"400",children:r})})}):/*#__PURE__*/(0,m.jsx)(a.Tg,{href:"/board/create/",onTap:o,children:/*#__PURE__*/(0,m.jsx)(a.xu,{"data-test-id":"createMenuCreateBoardButton",paddingY:2,children:/*#__PURE__*/(0,m.jsx)(a.X6,{size:"400",children:s})})})}var g=t(246826);function f({disabledPinCreation:e,handleDisablePublish:i,handleTouch:t}){let l=(0,c.ZP)(),o=(0,s.k6)(),r=e=>({imageBase64:e,description:"",imageUrl:"",method:g.Iv}),n=l.bt("Photo", "Photo", "createPinButton.Photo.Upload.Label", undefined, true);return/*#__PURE__*/(0,m.jsx)(a.iP,{onTap:()=>{if(e){i();return}t()},tapStyle:"none",children:/*#__PURE__*/(0,m.jsxs)(a.xu,{paddingY:2,position:"relative",children:[/*#__PURE__*/(0,m.jsx)(a.X6,{size:"400",children:n}),e?null:/*#__PURE__*/(0,m.jsx)("input",{accept:"image/*",id:"upload-pin",onChange:e=>{let i=new FileReader;i.readAsDataURL(e.target.files[0]),i.onload=()=>{let e=i.result;o.push({pathname:`/pin/create/${g.Iv}/`,state:r(String(e))})}},style:{opacity:0,position:"absolute",top:"0px",height:"100%",width:"100%"},type:"file"})]})})}var x=t(947506),A=t(934648),z=t(799239);function L(e,i,t){var l;return(i="symbol"==typeof(l=function(e,i){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,i||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?l:l+"")in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}let C=new a.Ry(1),j=e=>{let i=window&&window.innerWidth||0,t=e.bt("Enter a link to create a Pin, https://...", "Enter a link to create a Pin, https://...", "placeholder in text field where a user inputs a URL to create a Pin", undefined, true),l=e.bt("Enter a link, https://...", "Enter a link, https://...", "placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit", undefined, true);return i<380?l:t};class w extends l.PureComponent{constructor(...e){super(...e),L(this,"state",{createPinFromLinkUrl:"",showCreateModal:!1,showInlineTextEditCreatePin:!1,showPublishingDisabledError:!1,urlValidationError:null}),L(this,"createPinFromLinkInput",(0,l.createRef)()),L(this,"createMenuPlusIconButtonRef",(0,l.createRef)()),L(this,"closeCreateModal",()=>{this.setState({showCreateModal:!1,showInlineTextEditCreatePin:!1}),this.props.updatePinBuilderInput({isInputOpen:!1,submittedLink:""})}),L(this,"clearValidationError",()=>{this.setState({urlValidationError:null})}),L(this,"openCreateModal",()=>{this.handleTouch(),this.props.requireAuthForLimitedLogin({fn:()=>this.setState({showCreateModal:!0}),modalHeader:(0,x.is)(this.props.i18n)})()}),L(this,"handleCreatePinFromLinkTouch",()=>{this.setState({showInlineTextEditCreatePin:!0}),this.props.updatePinBuilderInput({isInputOpen:!0})}),L(this,"handleDisablePublish",()=>{this.setState({showCreateModal:!1,showPublishingDisabledError:!0})}),L(this,"handleLinkFieldChange",({value:e})=>{this.setState({createPinFromLinkUrl:e})}),L(this,"handlePinFromLinkFormSubmit",(e,i)=>{let{createPinFromLinkUrl:t}=this.state,{experimentsClient:l}=this.props;e.preventDefault();let{errors:o}=(0,u.Jx)({message:this.props.i18n.bt("Oops! Please enter a valid URL.", "Oops! Please enter a valid URL.", "URL validation error message on Pin builder form", undefined, true),experimentsClient:l})(t),[s]=o;s?this.setState({urlValidationError:s}):this.handleUrlValidationSuccess(i)}),L(this,"handleTouch",()=>{let{logContextEvent:e,viewType:i,elementType:t}=this.props;e({view_type:i,view_parameter:3106,element:t,event_type:102,aux_data:{source:p.Z.PROFILE}})}),L(this,"handleUrlValidationSuccess",e=>{this.setState({showInlineTextEditCreatePin:!1});let{createPinFromLinkUrl:i}=this.state;this.props.updatePinBuilderInput({submittedLink:i}),e.push({pathname:"/pin-builder/",state:{createPinFromLinkUrl:i}}),this.closeCreateModal()}),L(this,"renderCreatePinFromLinkOption",()=>{let{disabledPinCreation:e,history:i}=this.props,{createPinFromLinkUrl:t,showInlineTextEditCreatePin:l}=this.state,o=this.props.i18n.bt("Website", "Website", "editPin.CreatePinFromUrl.Label", undefined, true);return/*#__PURE__*/(0,m.jsx)(a.kC,{alignItems:"center",height:46,justifyContent:"start",children:l?/*#__PURE__*/(0,m.jsx)("form",{onSubmit:e=>this.handlePinFromLinkFormSubmit(e,i),style:{width:"100%"},children:/*#__PURE__*/(0,m.jsxs)(a.xu,{display:"flex",justifyContent:"between",position:"relative",zIndex:C,children:[/*#__PURE__*/(0,m.jsxs)(a.xu,{ref:this.createPinFromLinkInput,width:"100%",children:[this.renderErrorFlyout(),/*#__PURE__*/(0,m.jsx)(a.nv,{id:"create-pin-from-link",onChange:this.handleLinkFieldChange,onFocus:()=>this.setState({urlValidationError:null}),placeholder:j(this.props.i18n),size:"lg",value:t})]}),/*#__PURE__*/(0,m.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Create Pin from entered link", "Create Pin from entered link", "navigation button to confirm user will create a Pin from a link they entered", undefined, true),icon:"arrow-forward",iconColor:"darkGray",onClick:({event:e})=>this.handlePinFromLinkFormSubmit(e,i),size:"lg"})]})}):/*#__PURE__*/(0,m.jsx)(a.iP,{onTap:()=>{if(e){this.handleDisablePublish();return}this.handleCreatePinFromLinkTouch()},tapStyle:"none",children:/*#__PURE__*/(0,m.jsx)(a.xu,{"data-test-id":"websiteButton",position:"relative",children:/*#__PURE__*/(0,m.jsx)(a.X6,{size:"400",children:o})})})})}),L(this,"renderErrorFlyout",()=>{let{urlValidationError:e}=this.state;return e&&/*#__PURE__*/(0,m.jsx)(a.J2,{anchor:this.createPinFromLinkInput.current,idealDirection:"up",onDismiss:this.clearValidationError,size:"sm",children:/*#__PURE__*/(0,m.jsx)(a.xu,{padding:3,width:"100%",children:/*#__PURE__*/(0,m.jsxs)(a.kC,{gap:2,children:[/*#__PURE__*/(0,m.jsx)(a.qb,{type:"problem"}),/*#__PURE__*/(0,m.jsx)(a.xv,{align:"center",weight:"bold",children:e})]})})})})}componentDidMount(){let{isInputOpen:e,submittedLink:i}=this.props;(e||i)&&this.setState({showCreateModal:!!e,showInlineTextEditCreatePin:!!e,createPinFromLinkUrl:i||""})}render(){let{bgColor:e,boardId:i,buttonPadding:t,disabledPinCreation:o,i18n:s,isDesktop:r,iconButtonColor:c="gray",iconButtonSize:h="xl",viewType:_}=this.props,{showCreateModal:u,showPublishingDisabledError:p}=this.state,g=this.props.i18n.bt("Add a Pin or board", "Add a Pin or board", "heading in profile create modal", undefined, true);164===_?g=this.props.i18n.bt("Add to section", "Add to section", "heading in section create modal", undefined, true):5===_&&(g=this.props.i18n.bt("Add a Pin or section", "Add a Pin or section", "heading in profile create modal", undefined, true)||s.bt("Add to board", "Add to board", "heading in board create modal", undefined, true));let x=4===_?this.props.i18n.bt("Add to profile", "Add to profile", "editPin.AddToProfile.Modal.Header", undefined, true):g,A=(5===_||164===_)&&this.createMenuPlusIconButtonRef.current;return/*#__PURE__*/(0,m.jsxs)(l.Fragment,{children:[/*#__PURE__*/(0,m.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:/*#__PURE__*/(0,m.jsx)(a.xu,{"data-test-id":"createMenuCreateButton",children:/*#__PURE__*/(0,m.jsx)(a.hU,{ref:this.createMenuPlusIconButtonRef,accessibilityLabel:this.props.i18n.bt("Create a Pin or board", "Create a Pin or board", "icon that opens model prompting user to create a new pin or board", undefined, true),bgColor:e,icon:"add",iconColor:c,onClick:this.openCreateModal,padding:"auto"!==t?t:1,size:h})})}),u&&/*#__PURE__*/(0,m.jsx)(d.ZP,{accessibilityModalLabel:"",heading:x,isOpen:this.state.showCreateModal,mobileAccessibilityCloseIconLabel:this.props.i18n.bt("close board and pin create modal", "close board and pin create modal", "close modal that prompts user to create a new pin or board", undefined, true),onDismiss:this.closeCreateModal,type:"create_menu",children:/*#__PURE__*/(0,m.jsx)(a.xu,{padding:3,children:/*#__PURE__*/(0,m.jsxs)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[/*#__PURE__*/(0,m.jsxs)(l.Fragment,{children:[/*#__PURE__*/(0,m.jsxs)(a.xu,{paddingX:2,children:[/*#__PURE__*/(0,m.jsx)(a.xv,{children:this.props.i18n.bt("Create", "Create", "editPin.Create.Section.Text", undefined, true)}),/*#__PURE__*/(0,m.jsx)(l.Fragment,{children:this.renderCreatePinFromLinkOption()}),/*#__PURE__*/(0,m.jsx)(f,{disabledPinCreation:o,handleDisablePublish:this.handleDisablePublish,handleTouch:this.handleTouch})]}),164!==_&&/*#__PURE__*/(0,m.jsxs)(a.xu,{marginTop:6,paddingX:2,children:[/*#__PURE__*/(0,m.jsx)(a.xv,{children:this.props.i18n.bt("Add", "Add", "editPin.Section.Add.Text", undefined, true)}),/*#__PURE__*/(0,m.jsx)(b,{boardId:i,handleTouch:()=>{this.handleTouch(),this.closeCreateModal()},viewType:_})]})]}),/*#__PURE__*/(0,m.jsx)(a.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:7,children:/*#__PURE__*/(0,m.jsx)(a.zx,{onClick:()=>this.closeCreateModal(),size:"lg",text:this.props.i18n.bt("Close", "Close", "editPin.Modal.Close.Button", undefined, true)})})]})})}),p&&/*#__PURE__*/(0,m.jsx)(P,{isOpen:!0,onDismiss:()=>{this.setState({showPublishingDisabledError:!1})}}),A&&/*#__PURE__*/(0,m.jsx)(n.N,{anchors:{[r?3006:4006]:this.createMenuPlusIconButtonRef.current},idealDirection:"up",onAnchorTouch:"complete",placementId:r?18:1000251,scrollToDismiss:!0})]})}}function y(e){let i=(0,c.ZP)(),t=(0,_.HG)(),l=(0,h.F)(),{checkExperiment:a}=l,n=["disable_all","disable_web_pins"].includes(a("disable_pin_creation").group),d=(0,o.I0)(),u=(0,s.k6)(),{pinBuilder:p}=(0,o.v9)(e=>e.session),P=(0,r.Z)(),b=p&&p.isInputOpen,g=p&&p.submittedLink,f=(0,A.Z)();return/*#__PURE__*/(0,m.jsx)(w,{...e,disabledPinCreation:n,experimentsClient:l,history:u,i18n:i,isDesktop:t,isInputOpen:b,logContextEvent:P,requireAuthForLimitedLogin:f,submittedLink:g,updatePinBuilderInput:e=>d((0,z.p)(e))})}},246826:(e,i,t)=>{t.d(i,{Iv:()=>l,dU:()=>_,it:()=>a,jI:()=>h,n0:()=>n,nY:()=>s,sW:()=>c,up:()=>o});let l="uploaded",o="pinbuilder",s="scraped",a="button";function r(e){return!!e&&"object"==typeof e&&"method"in e}function n(e){return r(e)&&e.method===s}function d(e){return r(e)&&e.method===l}function c(e){return r(e)&&e.method===a}function h(e){return n(e)||d(e)||c(e)}function _({boardId:e,checkExperiment:i,createPin:t,sectionId:l,state:o}){let s=[];if(n(o)){let{imgData:a}=o;a.forEach(a=>{s.push(t(function({boardId:e,checkExperiment:i,image:t,sectionId:l,state:o}){let{description:s,link:a,method:r}=o;return{boardId:e,checkExperiment:i,description:s,guid:"",imageBase64:"",imageUrl:t,link:a,method:r,sectionId:l}}({boardId:e,checkExperiment:i,image:a,sectionId:l,state:o})))})}else s.push(t(function({boardId:e,checkExperiment:i,sectionId:t,state:l}){if(d(l)){let{description:o,imageBase64:s,imageUrl:a,method:r}=l;return{boardId:e,checkExperiment:i,description:o,guid:"",imageBase64:s,imageUrl:a,link:"",method:r,sectionId:t}}{let{description:o,guid:s,imageUrl:a,link:r,method:n}=l;return{boardId:e,checkExperiment:i,description:o,guid:s,imageUrl:a,link:r,method:n,sectionId:t}}}({boardId:e,checkExperiment:i,sectionId:l,state:o})));return s}},947506:(e,i,t)=>{t.d(i,{Bb:()=>m,Bx:()=>r,F4:()=>a,Qj:()=>n,_6:()=>p,gv:()=>s,hg:()=>d,is:()=>_,jP:()=>u,lt:()=>o,oM:()=>c,wI:()=>h});var l=t(868808);let o=e=>e.bt("Log in to continue", "Log in to continue", "limitedLogin.modalHeader.default", undefined, true),s=({firstName:e,i18n:i})=>e?(i.bt("{{ name }} invited you to join their board", "{{ name }} invited you to join their board", "limitedLogin.modalHeader.groupBoardCollab", undefined, true)).replace("{{ name }}",e):i.bt("Your friends invited you to join their board", "Your friends invited you to join their board", "limitedLogin.modalHeader.groupBoardCollab", undefined, true),a=e=>{let i=(0,l.mB)(e.search).board_url;if(i){let e=(0,l.Jx)(i),t=(0,l.XP)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${t}`:`${e}?${t}`}return e.pathname},r=e=>e.bt("Log in to save this Pin", "Log in to save this Pin", "limitedLogin.modalHeader.repin", undefined, true),n=e=>{let i=e.pathname;if(i.startsWith("/pin/")){let e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return i},d=e=>e.bt("Log in to send this Pin", "Log in to send this Pin", "limitedLogin.modalHeader.send", undefined, true),c=e=>e.bt("Log in to edit this Pin", "Log in to edit this Pin", "limitedLogin.modalHeader.editPin", undefined, true),h=e=>{let i=e.pathname;if(i.startsWith("/pin/")){let e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return i},_=e=>e.bt("Log in to create a Pin or board", "Log in to create a Pin or board", "limitedLogin.modalHeader.create", undefined, true),u=e=>e.bt("Log in to hide this Pin", "Log in to hide this Pin", "limitedLogin.modalHeader.hidePin", undefined, true),p=e=>e.bt("Log in to share the profile", "Log in to share the profile", "limitedLogin.modalHeader.shareProfile", undefined, true),m=e=>e.bt("Log in to create a board", "Log in to create a board", "limitedLogin.modalHeader.createBoard", undefined, true)},799239:(e,i,t)=>{t.d(i,{F:()=>l,p:()=>o});let l=e=>({type:"PIN_BUILDER_LOADED_IMAGES",payload:e}),o=e=>({type:"UPDATE_PIN_BUILDER_INPUT",payload:e})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/52406.en_GB-241d8962758e77ab.mjs.map