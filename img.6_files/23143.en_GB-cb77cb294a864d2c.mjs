"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[23143],{17314:(e,t,n)=>{n.d(t,{Z:()=>c});var i,s,a=n(813653),l=n(861470),o=0,r=0;let c=function(e,t,n){var c=t&&n||0,u=t||Array(16),d=(e=e||{}).node||i,_=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==_){var p=e.random||(e.rng||a.Z)();null==d&&(d=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==_&&(_=s=(p[6]<<8|p[7])&16383)}var h=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:r+1,g=h-o+(m-r)/1e4;if(g<0&&void 0===e.clockseq&&(_=_+1&16383),(g<0||h>o)&&void 0===e.nsecs&&(m=0),m>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,r=m,s=_;var f=((0xfffffff&(h+=122192928e5))*1e4+m)%0x100000000;u[c++]=f>>>24&255,u[c++]=f>>>16&255,u[c++]=f>>>8&255,u[c++]=255&f;var v=h/0x100000000*1e4&0xfffffff;u[c++]=v>>>8&255,u[c++]=255&v,u[c++]=v>>>24&15|16,u[c++]=v>>>16&255,u[c++]=_>>>8|128,u[c++]=255&_;for(var b=0;b<6;++b)u[c+b]=d[b];return t||(0,l.Z)(u)}},115701:(e,t,n)=>{var i,s;n.r(t),n.d(t,{default:()=>l});let a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BadgeManagerMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3DeleteBadgeMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"data",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null}],type:"V3DeleteBadge",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"BadgeManagerMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3DeleteBadgeMutation",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3DeleteBadge",abstractKey:null}],storageKey:null}]},params:{id:"b02365b27ce69f648cde539398a9bef3c506f5fcd3fbadc974256de04ec86078",metadata:{},name:"BadgeManagerMutation",operationKind:"mutation",text:null}};a.hash="ba7787ee8344e34b151f6a5f633c4170";let l=a},137095:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(495231);async function s(e,t){let{api:n}=(0,i.t)(),s=(0,i.u)();try{let i=new Date().getTime(),a=await n.put("/ads/v4/business_entities",e,!1);return s.success("setMultipleBizEntityPropertiesFullUpdate",t),s.latency("setMultipleBizEntityPropertiesFullUpdate",new Date().getTime()-i,t),a}catch(e){throw s.failure("setMultipleBizEntityPropertiesFullUpdate",t),e}}(0,i.u)()},269771:(e,t,n)=>{n.d(t,{b:()=>r,t:()=>o});var i=n(667294),s=n(498490),a=n(785893);let{Provider:l,useHook:o}=(0,s.Z)("LensContext");function r({children:e}){let[t,n]=(0,i.useState)(),[s,o]=(0,i.useState)(),[r,c]=(0,i.useState)([]),[u,d]=(0,i.useState)(),[_,p]=(0,i.useState)(),[h,m]=(0,i.useState)(!1);return/*#__PURE__*/(0,a.jsx)(l,{value:{heroImageUrl:s,historyData:r,image:t,imageData:_,isLensModalOpen:h,setHeroImageUrl:o,setHistoryData:c,setImage:n,setImageData:p,setIsLensModalOpen:m,setUpdatedCropArea:d,updatedCropArea:u},children:e})}},835157:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(383399);let s=()=>{let e=(0,i.Z)();return!!e.isAuth&&e.isPartner}},53608:(e,t,n)=>{n.d(t,{FE:()=>E,lG:()=>M,d9:()=>k});var i=n(667294),s=n(616550),a=n(835157),l=n(957583),o=n(297728),r=n(383399),c=n(415787);let u=()=>{let e=(0,r.Z)(),{checkExperiment:t}=(0,o.F)(),n=(0,a.Z)()&&t("web_m10n_business_reporting_business_entity_service").anyEnabled,[s,u]=(0,i.useState)({isReady:!1}),d=(0,i.useCallback)(async({entityId:e,actingBusinessId:t,favorites:i})=>{n&&(await (0,l.yo)({entityId:e,actingBusinessId:t,favorites:i}),u(e=>{let n={...e,actingBusinessId:t};return i&&(n.favoriteAdAccounts={favoriteAdAccountsMap:{...e.favoriteAdAccounts?.favoriteAdAccountsMap||{},[i.actingBusinessId]:{advertiserId:i.adAccounts}}}),n}))},[n]);return(0,i.useEffect)(()=>{n&&e.isAuth&&!s.isReady&&(async()=>{let t=!1;try{let t=await (0,l.SF)({entityId:e.id});u(e=>({...e,...t}))}catch{t=!0}finally{(0,c.nP)("globalAccountSwitcher.getFavoriteAdAccounts",{sampleRate:1,tags:{businessId:e.id,hasError:t}}),u(e=>({...e,isReady:!0}))}})()},[s.isReady,n,e]),{accountSwitcherConfig:s,setConfig:d}};var d=n(545007),_=n(366513),p=n(442279),h=n(689567);let m=(0,p.P1)(h.Z,({viewerIsProfileOwnerOrProfileManager:e})=>e??void 0);var g=n(501912),f=n(801621),v=n(467403);let b=()=>{let e=(0,r.Z)(),t=(0,i.useRef)(e);t.current=e;let n=(0,d.I0)(),s=(0,g.Z)(),a=(0,i.useRef)(s);a.current=s;let o=(0,d.v9)(m),c=o?.data||void 0,u=(0,i.useRef)(c);u.current=c,(0,i.useEffect)(()=>{(async()=>{if(t.current.isAuth&&void 0===o.data){let e=await (0,l.bG)({user_id:t.current.id});if(void 0!==e&&void 0===u.current){let i=(0,f.D3)(t.current,e?.id??"",a)||t.current.isAuth&&t.current.username===e?.username;n((0,_.Z)(!!i))}}})()},[t,u,n,a,o]);let p=(0,v.rc)(c);return{viewerIsProfileOwnerOrProfileManagerData:c,previousIsViewerProfileOwnerOrProfileManager:p}};var y=n(200892),w=n(573706),C=n(498490),x=n(282999),A=n(812477),S=n(868808),P=n(668868),Z=n(553740),L=n(785893);let{Provider:I,useHook:k}=(0,C.Z)("AccountSwitcherContext"),M=e=>e.search&&(0,S.mB)(e.search).advertiserId,E=({children:e})=>{let t=(0,s.TH)(),{params:{userBizId:n,businessHierarchyId:c,advertiserId:d,username:_}}=(0,s.$B)(),{catalogId:p}=(0,Z.Z)(),h=M(t),m=(0,r.Z)(),{viewerIsProfileOwnerOrProfileManagerData:g,previousIsViewerProfileOwnerOrProfileManager:f}=b(),{checkExperiment:C}=(0,o.F)(),S=C("web_m10n_business_access_catalogs").anyEnabled,[k,E]=(0,i.useState)(""),[T,j]=(0,i.useState)(null),[O,B]=(0,i.useState)(!1),[N,z]=(0,i.useState)(null),R=new URLSearchParams(t.search),[$,U]=(0,i.useState)(R.has("actingBusinessId")?null:{id:m.id||"",name:m.fullName||"",img:m.imageMediumUrl||""}),[D,H]=(0,i.useState)(!1),F=(0,a.Z)(),{logContextEvent:V}=(0,w.v)(),{accountSwitcherConfig:G,setConfig:W}=u();(0,i.useEffect)(()=>{c?E(c):E("")},[c]);let Y=(0,i.useCallback)(async({id:e,username:t})=>{let n=await (0,l.bG)({user_id:e,username:t});n&&z({type:e?y.Oz.BUSINESS_ACCOUNT:y.Oz.PROFILE,id:e||n.id,name:n.full_name,img:n.image_medium_url,username:t,ownerImg:n.image_medium_url,ownerName:n.full_name,actingBusinessFullName:$?.name||n.full_name}),H(!1)},[$]),q=(0,v.rc)(_);(0,i.useEffect)(()=>{(0,A.Z)(t)&&N&&q!==_&&_===m.username&&(Y({username:m.username}),U({id:m.id||"",name:m.fullName||"",img:m.imageMediumUrl||""}),j({type:y.nt,id:m.id}))},[t,q,Y,N,_,m.fullName,m.id,m.imageMediumUrl,m.username]),(0,i.useEffect)(()=>{let e=async({businessId:e,assetId:n})=>{if(!e){H(!1);return}let i=S&&(0,x.Bg)(t)?"CATALOG":"AD_ACCOUNT";try{let e={asset:{name:""},type:i};if(m.isAuth){let{data:{data:t={[n]:e}}={}}=await (0,P.pI)({businessId:$?.id||m.id,assetIds:[n],resourceType:i})||{},{asset:s,type:a}=t[n]||e;z({id:n,name:"CATALOG"===i?t[n].owner.full_name:s.name,img:t[n].owner.image_medium_url,type:a,ownerImg:t[n].owner.image_medium_url,ownerName:t[n].owner.full_name,actingBusinessFullName:$?.name||t[n].owner.full_name})}}catch{z({id:m.id||"",name:m.fullName||"",img:m.imageMediumUrl||"",type:y.Oz.BUSINESS_ACCOUNT,ownerImg:m.imageMediumUrl||"",ownerName:m.fullName||"",actingBusinessFullName:m.fullName||""})}H(!1)},i=async({id:e})=>{let t=await (0,l.p)({hierarchyId:e});z({id:e,name:t?.data?t.data.name:"",img:t?.data?t.data.img_medium_url:"",type:y.Oz.BUSINESS_HIERARCHY,ownerImg:t?.data?t.data.img_medium_url:"",ownerName:t?.data?t.data.name:"",actingBusinessFullName:t?.data?t.data.name:""}),H(!1)};if(m.isAuth&&F){let s=N&&N.username&&N.username!==_,a=!0===g&&g!==f;if((!N||s||a)&&!D&&$){let s=(0,x.z6)(t)||(0,x.h3)(t),a=d||!!h&&!s||(0,x.Bg)(t)&&S;H(!0),c?i({id:c}):n?Y({id:n}):(0,A.Z)(t)&&_&&g?Y({username:_}):a?e({businessId:m.id,assetId:d||h||p||""}):N&&N.id===m.id||(z({type:y.Oz.BUSINESS_ACCOUNT,id:m.id||"",name:m.fullName||"",img:m.imageMediumUrl||"",ownerImg:m.imageMediumUrl||"",ownerName:m.fullName||"",actingBusinessFullName:m.fullName||""}),H(!1))}}},[N,m,c,n,_,d,h,$,F,t,Y,D,g,f,p,S]);let K=(0,i.useMemo)(()=>({activePanel:T,selectedHierarchyId:k,switcherOpen:O,openAccountSwitcher:()=>{if(V({event_type:101,view_type:608,component:14346}),!T){if((0,x.z6)(t))j({type:y.v8});else{let e=new URLSearchParams(t.search).get("actingBusinessId");j({type:y.nt,id:e??$?.id})}}B(!0)},closeAccountSwitcher:()=>{j(N&&!(0,x.z6)(t)?{type:y.nt,id:$?.id}:{type:y.v8}),B(!1)},openAssetPanel:e=>{j({type:y.nt,id:e})},closeAssetPanel:()=>{j(N&&!(0,x.z6)(t)?{type:y.nt,id:$?.id}:{type:y.v8})},activateBusinessPanel:()=>{j({type:y.v8})},actingBusiness:$,selectedAccount:N,setSelectedAccount:z,setActingBusiness:U,accountSwitcherConfig:G,setConfig:W}),[T,k,O,$,N,G,W,V,t]);return/*#__PURE__*/(0,L.jsx)(I,{value:K,children:e})}},252025:(e,t,n)=>{n.d(t,{C:()=>f,H:()=>v});var i=n(667294),s=n(835157),a=n(200892),l=n(957583),o=n(449112),r=n(909015),c=n(591769),u=n(498490),d=n(400416),_=n(697254),p=n(383399),h=n(697843),m=n(785893);let{Provider:g,useHook:f}=(0,u.Z)("BusinessHierarchyContext"),v=({children:e})=>{let[t,n]=(0,i.useState)([]),[u,f]=(0,i.useState)([]),[v,b]=(0,i.useState)(!1),[y,w]=(0,i.useState)(!1),[C,x]=(0,i.useState)({}),[A,S]=(0,i.useState)(null),[P,Z]=(0,i.useState)([]),[L,I]=(0,i.useState)({}),k=(0,h.Z)(),M=(0,i.useRef)(k),E=(0,p.Z)(),T=(0,s.Z)(),j=(0,i.useRef)({}),O=(0,i.useCallback)((e,t)=>{let n;t===a.Oz.BUSINESS_HIERARCHY?n=(0,c.Z)(r.Q6.DASHBOARD,"","",e):t===a.Oz.BUSINESS_ACCOUNT&&(n=(0,c.Z)(r.Q6.DASHBOARD,e));let i=(0,_.Z)({site:"www",path:n});(0,o.Z)(i)},[]),B=(0,i.useCallback)(async e=>{if(!T)return[];if(w(!0),j.current[e])return w(!1),j.current[e];{let{data:t}=(await (0,d.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:e}})).resource_response,n=t&&t.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=a.Oz.USER_ACCOUNT,e))),e))||[],i=/^\d+$/.test(e),s=RegExp(e.toLowerCase(),"g"),o=[];A||S(o=await M.current());let r=(A??o).filter(t=>i?t.id.includes(e):t.user.full_name.toLowerCase().match(s)).map(l.IT),c=[...n.map(e=>e.id),...r.map(e=>e.id)],u=i?(E.id||"").includes(e):(E.fullName||"").toLowerCase().match(s);return E.isAuth&&u&&c.push(E.id),j.current[e]=c,w(!1),c}},[T,M,E.id,E.fullName,E.isAuth,A]),{id:N="",username:z="",email:R="",fullName:$="",imageSmallUrl:U="",imageMediumUrl:D="",isAuth:H}=E,F=async(e,t)=>{if((!H||!T||A)&&!e)return;b(!0);let i=[];try{let{data:e}=(await (0,d.Z)({url:"ads/v4/business_access/business_hierarchies/"})).resource_response;i=e&&e.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=a.Oz.USER_ACCOUNT,e))),e))||[],n(i)}catch{n([])}try{let n=[];(!A||e)&&(n=await M.current(),f(n.filter(e=>t&&A&&!A.some(({id:t})=>t===e.id)).map(e=>e.user.full_name)),S(n));let s=e?n:A??n;Z(s.map(l.IT)),I(s.reduce((e,t)=>(e[t.id]=t.business_roles||[],e),{})),x((0,l.WP)({id:N,username:z,email:R,fullName:$,imageSmallUrl:U,imageMediumUrl:D})),j.current[""]=[...i.map(e=>e.id),...s.map(l.IT).map(e=>e.id),N],b(!1)}catch{b(!1)}},V=(0,i.useCallback)(F,[N,z,R,$,U,D,H,T,A]),G=(0,i.useCallback)(e=>t.some(t=>t.id===e||t.children.some(t=>t.id===e||t.user.id===e)),[t]),W=(0,i.useCallback)(e=>t.map(e=>"BUSINESS_HIERARCHY"===e.entity_type?e:null).find(t=>!!t&&t.children.some(t=>t.user.id===e)),[t]),Y=(0,i.useCallback)(()=>{f([])},[f]),q=(0,i.useMemo)(()=>({businessHierarchies:[...C.id&&!G(C.id)?[C]:[],...t,...P.filter(e=>!G(e.id))],switchAccount:O,searchAccounts:B,loadingAccounts:v,isSearchingAccounts:y,fetchData:V,getParentHierarchyForIdIfExists:W,viewerRolesOfEachEmployer:L,tooltipEmployers:u,hideTooltip:Y}),[t,O,B,P,v,y,C,V,G,W,L,u,Y]);return/*#__PURE__*/(0,m.jsx)(g,{value:q,children:e})}},957583:(e,t,n)=>{n.d(t,{IT:()=>c,SF:()=>p,WP:()=>u,bG:()=>_,p:()=>d,yo:()=>h});var i=n(984556),s=n(41003),a=n(252071),l=n(200892),o=n(400416),r=n(719641);let c=e=>({id:e.id,entity_type:l.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:l.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),u=e=>({id:e.id,entity_type:l.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:l.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),d=async({hierarchyId:e})=>(await (0,o.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`})).resource_response,_=async({user_id:e,username:t})=>{if(!t&&!e)return null;let{resource_response:{data:n}}=await a.Z.create("UserResource",{user_id:e,username:t}).callGet();return n},p=async({entityId:e})=>{let t=(await (0,i.Z)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]))[0];return t&&t.properties?t.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG:{}},h=async({entityId:e,actingBusinessId:t,favorites:n})=>{let i={};(0,r.k)(t)||(i.actingBusinessId=t),n&&(i.favoriteAdAccounts={favoriteAdAccountsMap:{[n.actingBusinessId]:{advertiserId:n.adAccounts}}}),Object.keys(i).length>0&&await (0,s.Z)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:i}}])}},921048:(e,t,n)=>{n.d(t,{r:()=>b,K:()=>f});var i=n(667294),s=n(984556),a=n(137095),l=n(400416),o=n(495231);let r=async(e,t)=>{let{statsLog:n}=(0,o.t)();try{let i=new Date,s=await (0,l.Z)({url:"/ads/v4/business_entities",data:e,method:"POST"}),a=new Date;return n&&(n.success("getMultipleBizEntityProperties",t),n.latency("getMultipleBizEntityProperties",a.getTime()-i.getTime(),t)),s.resource_response.data}catch(e){throw n&&n.failure("getMultipleBizEntityProperties",t),e}},c=async(e,t,n="PUT")=>{let{statsLog:i}=(0,o.t)();try{let s=new Date,a=await (0,l.Z)({url:"/ads/v4/business_entities",data:e,method:n}),o=new Date;return i&&(i.success("setMultipleBizEntityPropertiesFullUpdate",t),i.latency("setMultipleBizEntityPropertiesFullUpdate",o.getTime()-s.getTime(),t)),a.resource_response.data}catch(e){throw i&&i.failure("setMultipleBizEntityPropertiesFullUpdate",t),e}};var u=n(498490),d=n(194093),_=n(297728),p=n(383399),h=n(415787),m=n(785893);let{Provider:g,useHook:f}=(0,u.Z)("CustomShortcutsContext"),v=()=>Object.freeze(["business.pinterest.com","create.pinterest.com","about.pinterest.com","support.pinterest.com","developers.pinterest.com","newsroom.pinterest.com"]),b=({children:e})=>{let t=(0,p.Z)(),n=(0,_.F)(),[l,o]=(0,i.useState)({}),u=(0,i.useCallback)(async()=>{let{anyEnabled:e}=n.checkExperiment("exp_ia_navigation_mega_nav_m2"),{anyEnabled:i}=n.checkExperiment("aid_exp_use_fetch_api_in_custom_shortcut_context"),a=!!t.isAuth,l=!!t.isAuth&&t.isPartner,c=v().every(e=>!window.location.href?.includes(e));if(e&&a&&l&&!t.isLimitedLogin&&c)try{let e;e=i?r:s.Z;let n=(await e([{entity_id:t.id,entity_type:"BIZ_USER",property_keys:["NAVBAR_CONFIG"]}]))[0];if(!(n&&n.properties))return;let a=n.properties.NAVBAR_CONFIG;o(a?.customShortcuts||{})}catch(e){(0,h.nP)("pro_partner_header.dynamic_menu.shortcuts.get_error",{sampleRate:1,tags:{entity_id:t.id,error:(0,d.Z)(e,"message")}})}},[t.isAuth,t.id,t.isPartner,t.isLimitedLogin,n]),f=(e,t)=>({entity_id:e,entity_type:"BIZ_USER",properties:{NAVBAR_CONFIG:{customShortcuts:t}}}),b=(0,i.useCallback)(async e=>{let{anyEnabled:i}=n.checkExperiment("exp_ia_navigation_mega_nav_m2"),{anyEnabled:s}=n.checkExperiment("aid_exp_use_fetch_api_in_custom_shortcut_context");if(!(t.isAuth&&i))return(0,h.nP)("pro_partner_header.dynamic_menu.shortcuts.upsert_error",{sampleRate:1,tags:{entity_id:t.id,error:"Auth_Error"}}),{error:"Auth_Error"};try{let n;n=s?c:a.Z;let i=f(t.id,e);return await n([i]),u(),{error:null}}catch(e){return(0,h.nP)("pro_partner_header.dynamic_menu.shortcuts.upsert_error",{sampleRate:1,tags:{entity_id:t.id,error:(0,d.Z)(e,"message")}}),{error:"Upsert_Error"}}},[t.isAuth,t.id,n,u]);(0,i.useEffect)(()=>{u()},[u]);let y=(0,i.useMemo)(()=>({shortcuts:l,upsertShortcuts:b}),[l,b]);return/*#__PURE__*/(0,m.jsx)(g,{value:y,children:e})}},189869:(e,t,n)=>{n.d(t,{Li:()=>s,Wz:()=>a,qJ:()=>i});let i=40,s=80,a={INVALID_USER:0,ADMIN:1,READ_ONLY:2}},847452:(e,t,n)=>{n.d(t,{n:()=>i});let i=20},481238:(e,t,n)=>{n.d(t,{Z:()=>i});function i(e){return e?"/pin-creation-tool/":"/idea-pin-builder/"}},454047:(e,t,n)=>{n.d(t,{Z:()=>i});let i='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},282685:(e,t,n)=>{n.d(t,{Z:()=>H});var i=n(883119),s=n(503546),a=n(616550),l=n(144326),o=n(240760),r=n(785893);let c=()=>{let e=(0,l.ZP)();return/*#__PURE__*/(0,r.jsx)(i.he,{iconAccessibilityLabel:e.bt("Info message", "Info message", "header.accountsOptionsMenu.info.icon", undefined, true),message:/*#__PURE__*/(0,r.jsx)(i.xv,{inline:!0,weight:"bold",children:(0,o.nk)(e.bt("Business Access {{ isNow }} Business Manager {{ restOfMsg }}", "Business Access {{ isNow }} Business Manager {{ restOfMsg }}", "header.accountsOptionsMenu.newEntryPtBold", undefined, true),{isNow:/*#__PURE__*/(0,r.jsx)(i.xv,{inline:!0,children:e.bt("is now", "is now", "header.accountsOptionsMenu.newEntryPtIsNow", undefined, true)}),restOfMsg:/*#__PURE__*/(0,r.jsx)(i.xv,{inline:!0,children:e.bt("and can now be found in the Business drop-down menu.", "and can now be found in the Business drop-down menu.", "header.accountsOptionsMenu.newEntryPtRestOfMsg", undefined, true)})})}),type:"info"})};var u=n(573706),d=n(803611),_=n(777396),p=n(667294),h=n(609326),m=n(297728),g=n(864723);let f=new Date("2025-01-15T00:00:00");function v({paddingY:e=0}){let t=(0,l.ZP)(),n=(0,g.M0)(),s=n.getItem(h.z),[a,o]=(0,p.useState)(s),{logContextEvent:c}=(0,u.v)(),{checkExperiment:d}=(0,m.F)(),_=(0,p.useCallback)(()=>{n.setItem(h.z,!0),c({event_type:16446}),o(!0)},[c,n]);if(!d("web_profile_menu_claiming").anyEnabled)return null;let v=new Date;return a?null:/*#__PURE__*/(0,r.jsx)(i.xu,{paddingY:e,children:/*#__PURE__*/(0,r.jsx)(i.he,{iconAccessibilityLabel:t.bt("Claim external accounts", "Claim external accounts", "header.accountsOptionsMenu.contentClaimingLink", undefined, true),message:t.bt("You can now link your Instagram and other external accounts to Pinterest.", "You can now link your Instagram and other external accounts to Pinterest.", "header.accountsOptionsMenu.accountClaimingBannerMessage", undefined, true),onDismiss:v>=f?_:void 0,type:"info"})})}var b=n(803405);function y(){let e=(0,l.ZP)(),{checkExperiment:t}=(0,m.F)();return{addAccount:{value:"add-account",label:t("web_profile_menu_claiming").anyEnabled?e.bt("Add Pinterest account", "Add Pinterest account", "header.accountsOptionsMenu.addSecondaryAccountButton", undefined, true):e.bt("Add account", "Add account", "header.accountsOptionsMenu.addSecondaryAccountButton", undefined, true)},businessAccess:{value:"business-access",label:e.bt("Business Access", "Business Access", "Link to business Access Landing Page", undefined, true)},businessAccount:e=>({value:`business-account-${e.id}`,label:e.username}),accountClaiming:{value:"account-claiming",label:e.bt("Claim external accounts", "Claim external accounts", "header.accountsOptionsMenu.contentClaimingLink", undefined, true)},contentClaiming:{value:"content-claiming",label:e.bt("Content Claiming Portal", "Content claiming portal", "header.accountsOptionsMenu.contentManagementPortal", undefined, true)},convertToBusiness:{value:"convert-to-business",label:e.bt("Convert to business", "Convert to business", "header.accountsOptionsMenu.addAccountButton", undefined, true)},currentAccount:{value:"current-account",label:e.bt("Current account", "Current account", "SwitchAccountsList.CurrentlyInItem", undefined, true)},failedAccount:{value:"failed-account",label:e.bt("Failed to log in to this account", "Failed to log into this account", "header.accountsOptionsMenu.failedAccountItem", undefined, true)},getHelp:{value:"get-help",label:e.bt("Help Centre", "Help center", "header.accountsOptionsMenu.helpCenter.label", undefined, true)},homefeedTuner:{value:"homefeed-tuner",label:e.bt("Home feed tuner", "Home feed tuner", "header.accountsOptionsMenu.homefeedTuner.label", undefined, true)},installApp:e=>({value:"install-app",label:e}),lbaAccountSwitch:e=>({value:`lba-account-switch-${e.id}`,label:e.username}),logOut:{value:"log-out",label:e.bt("Log out", "Log out", "header.accountsOptionsMenu.logout", undefined, true)},parentAccount:e=>({value:`parent-account-${e.id}`,label:e.username}),termsOfService:{value:"tos-policy",label:e.bt("Terms of Service", "Terms of service", "header.accountsOptionsMenu.termsOfService.label", undefined, true)},privacyPolicy:{value:"privacy-policy",label:e.bt("Privacy Policy", "Privacy policy", "header.accountsOptionsMenu.privacyPolicy.label", undefined, true)},reportsAndViolationsCenter:{value:"reports-and-violations-center",label:e.bt("Reports and Violations Centre", "Reports and violations center", "header.accountsOptionsMenu.reportsAndViolationsCenter", undefined, true)},reportBug:{value:"report-bug",label:e.bt("Report a bug", "Report a bug", "header.accountsOptionsMenu.reportBug", undefined, true)},settings:{value:"settings",label:e.bt("Settings", "Settings", "header.accountsOptionsMenu.settings", undefined, true)},settingsPrivacy:{value:"settingsPrivacy",label:e.bt("Your privacy rights", "Your privacy rights", "header.accountsOptionsMenu.settingsPrivacy.label", undefined, true)},adsSupport:{value:"ads-support",label:e.bt("Ads support", "Ads support", "header.accountsOptionsMenu.adsSupport", undefined, true)},requestFeature:{value:"request-a-feature",label:e.bt("Request a feature", "Request a feature", "header.accountsOptionsMenu.requestAFeature", undefined, true)},pinterestTvStudio:{value:"pinterest-tv-studio",label:e.bt("Pinterest TV Studio", "Pinterest TV Studio", "Link to Pinterest Tv Creator Studio", undefined, true)},betaTester:{value:"be-a-beta-tester",label:e.bt("Be a beta tester", "Be a beta tester", "header.accountsOptionsMenu.beBetaTesterProgram", undefined, true)},teenSafetyResources:{value:"teen-safety-resources",label:e.bt("Teen safety resources", "Teen safety resources", "header.accountsOptionsMenu.teenSafetyResources", undefined, true)}}}var w=n(527469),C=n(319162),x=n(644182),A=n(656826),S=n(961754),P=n(635258),Z=n(383399),L=n(449112),I=n(488792),k=n(915571),M=n(319070),E=n(207630),T=n(877709);let j=["chrome","windows"];var O=n(402189),B=n(862014),N=n(48347),z=n(415787);function R({failedAccount:e,handleReauthAccount:t,handleRemoveUnauthAccount:n}){let s=(0,l.ZP)();return/*#__PURE__*/(0,r.jsxs)(p.Fragment,{children:[/*#__PURE__*/(0,r.jsx)(i.xu,{marginTop:4,children:/*#__PURE__*/(0,r.jsx)(i.zx,{color:"red",fullWidth:!0,onClick:t,text:s.bt("Log in again", "Log in again", "header.accountsOptionsMenu.failedAccountLoginButton", undefined, true)})}),/*#__PURE__*/(0,r.jsx)(i.xu,{marginTop:3,children:/*#__PURE__*/(0,r.jsx)(i.zx,{fullWidth:!0,onClick:()=>n(e.id),text:s.bt("Remove account", "Remove account", "header.accountsOptionsMenu.failedAccountRemoveButton", undefined, true)})})]})}var $=n(566344),U=n(139092);let D=new i.Ry(1e3);function H({anchor:e,onDismiss:t,advertiser:n,showAccountSwitcher:o,showAdsSupportOption:h,showMoreOptions:g=!0,isWwwSite:f,idealDirection:H="down",dropdownId:F="HeaderAccountOptionsFlyout",zIndex:V=D}){let G=(0,Z.Z)(),W=(0,l.ZP)(),{failedAccount:Y,fetchedUserAccounts:q,handleAccountRepClick:K,handleLinkedAccountSwitch:J,handleReauthAccount:X,handleRemoveUnauthAccount:Q}=(0,C.Z)(t,f),ee=y(),et=q.find(e=>e.id===(G.isAuth&&G.id)),en=G.isAuth&&G.partner?.is_linked_business,{enabled:ei}=(0,s.Z)(),{yourAccount:es,moreOptions:ea}=function({onDismiss:e,handleFocus:t,advertiser:n,showAdsSupportOption:s,isWwwSite:o,isVerticalNavEnabled:h}){let{id:g,isAuth:f,isEmployee:R,isLimitedLogin:$,isPartner:U,partner:D,teenSafetyOptionsUrl:H}=(0,Z.Z)(),F=(0,l.ZP)(),{logContextEvent:V}=(0,u.v)(),G=(0,a.k6)(),{isLoaded:W,data:Y}=(0,S.Z)({name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:"user.content_claiming_access"}}}),{isLoaded:q,data:K}=(0,S.Z)({name:"ApiResource",options:{url:"/v3/users/settings/"}}),{content_claiming_access:J=!1}=Y||{},{handleShowReportBugModal:X}=(0,N.Z)(),Q=(0,w.Z)(),ee=function(){let e=(0,l.ZP)(),t=(0,p.useContext)(T.Z),n=(0,k.kM)(window,t),i=(0,I.Z)(),s=e=>{i({component:247,element:e,event_type:101})},a=(0,E.Z)(e.bt("Install the {{appName}} app", "Install the {{appName}} app", "header.accountsOptionsMenu.installApp", undefined, true),{appName:(0,M.Z)(n)});return j.includes(n)?{onClick:()=>{if("windows"===n)s(11409),(0,L.Z)(`${P.TMP}&cid=flyout_cta`,!0);else if("chrome"===n&&t){let e=t();e&&(s(11410),e.prompt())}},text:a}:null}(),{checkExperiment:et}=(0,m.F)(),en=!!f&&U,ei=f&&!!H,es=!!f&&!$,ea=(0,d.Z)(),{fetchedUserAccounts:el,handleAccountRepClick:eo,handleAddSecondaryAccount:er,handleClick:ec,handleLinkedAccountSwitch:eu,handleUnlockBusinessTools:ed,isLoading:e_,showUnlockBusinessTools:ep}=(0,C.Z)(e,o),eh=y(),em=el.filter(e=>!e.partner&&!(e.owners||[]).length||e.partner&&!e.partner.isLinkedBusiness),eg=el.find(e=>e.id===(f&&g));f&&D?.is_linked_business&&(em=em.sort(e=>eg?.owners?.some(t=>t.id===e.id)?-1:1));let ef=q&&(!K?.opt_in_private_account||K.opt_in_private_account&&(em.length>1||1===em.length&&em[0].businesses.length>0)),ev=e_&&/*#__PURE__*/(0,r.jsx)(x.Z,{}),eb=eg?.businesses?.length?eg.businesses.map(e=>g!==e.id&&/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{dataTestId:"lba-account-switch-option",onSelect:()=>eu(e,eg.id),option:eh.lbaAccountSwitch(e),children:/*#__PURE__*/(0,r.jsx)(b.Z,{user:e},e.id)},e.id)):null,ey=em.map(e=>e.id!==(f&&g)?[/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{onSelect:()=>eo(e),option:eh.parentAccount(e),children:/*#__PURE__*/(0,r.jsx)(b.Z,{isCurrentAccount:(f&&g)===e.id,user:e})},e.id),...e?.businesses?.length?e.businesses.map(t=>g!==t.id&&/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{dataTestId:"lba-account-switch-option",onSelect:()=>eu(t,e.id),option:eh.businessAccount(t),children:/*#__PURE__*/(0,r.jsx)(b.Z,{user:t},t.id)},t.id)):[]]:null),ew=o&&/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{dataTestId:"header-menu-add-account",onSelect:er,option:eh.addAccount}),eC=/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{dataTestId:"header-menu-add-account",onSelect:er,option:eh.addAccount}),ex=ep&&/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{dataTestId:"header-menu-business-account",onSelect:ed,option:eh.convertToBusiness}),eA=et("web_profile_menu_claiming").anyEnabled,eS=eA&&/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{href:P.zXf,onClick:({event:e})=>{e.preventDefault(),ec(15983),t()},option:eh.accountClaiming}),eP=W&&J&&/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{href:"/content-claiming",onClick:()=>{ec(13606),t()},option:eh.contentClaiming}),eZ=f&&!!R&&/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{onSelect:()=>{X(),ec(13607),e()},option:eh.reportBug}),eL=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-settings",href:es?`https://${(0,_.Z)()}/settings`:"",onClick:({event:e})=>{if(ea){e.stopPropagation(),ea();return}ec(247),t()},option:eh.settings}),eI=et("aid_exp_business_manager_dropdown_entrypoint").anyEnabled,ek=null;en&&(ek=eI?/*#__PURE__*/(0,r.jsx)(c,{}):/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-business-access",href:`https://${(0,_.Z)()}/business/business-access/`,onClick:()=>{ec(11719),t()},option:eh.businessAccess}));let eM=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{href:es?"/edit":"",onClick:({event:e})=>{if(ea){e.stopPropagation(),ea();return}ec(11345),t()},option:eh.homefeedTuner}),eE=!en&&ee?/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{onSelect:()=>{ee.onClick(),e()},option:eh.installApp(ee.text)}):null,eT=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-privacy",href:es?`https://${(0,_.Z)()}/settings/privacy`:"",onClick:({event:e})=>{if(ea){e.stopPropagation(),ea();return}ec(13334),t()},option:eh.settingsPrivacy}),ej=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{href:es?"/reports-and-violations":"",onClick:({event:e})=>{if(ea){e.stopPropagation(),ea();return}ec(14618),t()},option:eh.reportsAndViolationsCenter}),eO=ei?/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{href:H??"",iconEnd:"visit",onClick:()=>{V({event_type:101,element:14321}),ec(14321),t()},option:eh.teenSafetyResources}):null,eB=en&&s&&(!n||(0,A.Z)((n||{}).actions||[],7))&&/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-ads-support",href:P.JbB,iconEnd:"visit",onClick:()=>{ec(10106),t()},option:eh.adsSupport}),eN=en?/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-request-a-feature",href:P.W32+"?utm_source=pinterest&utm_medium=settings&utm_campaign=request_a_feature_exp",iconEnd:"visit",onClick:()=>{ec(11345),t()},option:eh.requestFeature}):null,ez=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-help",href:`${P.gOE}?source=gear_menu_web`,iconEnd:"visit",onClick:()=>{ec(8002),t()},option:eh.getHelp}),eR=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-tos",href:P.U5h,iconEnd:"visit",onClick:()=>{ec(61),t()},option:eh.termsOfService}),e$=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-policy",href:P.R_9,iconEnd:"visit",onClick:()=>{ec(8004),t()},option:eh.privacyPolicy}),eU=/*#__PURE__*/(0,r.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-beta-tester",href:"https://www.pinterest.com/public-beta/",iconEnd:"visit",onClick:()=>{ec(13613),t()},option:eh.betaTester}),eD=/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{dataTestId:"header-menu-options-logout",onSelect:Q,option:eh.logOut}),eH=ef?/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:F.bt("Your accounts", "Your accounts", "SwitchAccountsList.YourAccountsTitle", undefined, true),children:[ev,eb,ey,!K?.opt_in_private_account&&ew,!K?.opt_in_private_account&&ex]},"your-accounts"):null,eF=/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:F.bt("Your accounts", "Your accounts", "SwitchAccountsList.YourAccountsTitle", undefined, true),children:[ev,eb,ey,!K?.opt_in_private_account&&eC,!K?.opt_in_private_account&&ex,eL,ek]},"your-accounts"),eV=/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:F.bt("Content", "Content", "header.accountsOptionsMenu.contentHeader", undefined, true),children:[eP,/*#__PURE__*/(0,r.jsx)(v,{paddingY:1}),eS,ej,eE]}),eG=/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:F.bt("Help", "Help", "header.accountsOptionsMenu.helpHeader", undefined, true),children:[eO,ez,eB,eN,eZ]}),eW=/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:F.bt("Privacy", "Privacy", "header.accountsOptionsMenu.privacyHeader", undefined, true),children:[e$,eT]}),eY=/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:"",children:[eR,eD]}),eq=/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{onSelect:()=>{(0,z.nP)(O.Un.MORE_OPTIONS_OPT_OUT,{sampleRate:1}),(0,B.f)(),G.push("/"),window.location.reload()},option:{label:"Opt out of Vertical Nav",value:"opt-out-vertical-nav"}}),eK=h?[f&&R?eq:null,eZ,eL,ek,eM,eA&&/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:"",children:[/*#__PURE__*/(0,r.jsx)("style",{children:'#VerticalNav-MoreOptions-Flyout [role="presentation"] {display: none;}'}),/*#__PURE__*/(0,r.jsx)(v,{paddingY:1}),eS]}),eE,eB,eN,ej,eP,eT,eO,ez,eR,e$,eU,eD]:/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:F.bt("More options", "More options", "header.accountsOptionsMenu.optionsHeader", undefined, true),children:[eZ,eL,ek,eM,/*#__PURE__*/(0,r.jsx)(v,{paddingY:1}),eS,eE,eB,eN,ej,eP,eT,eO,ez,eR,e$,eU,eD]});return{yourAccount:en?eF:eH,moreOptions:en?[eV,eG,eW,eY]:eK}}({onDismiss:t,advertiser:n,showAdsSupportOption:h,isWwwSite:f,isVerticalNavEnabled:ei,handleFocus:()=>{e?.focus()}});return/*#__PURE__*/(0,r.jsx)(U.Z,{children:/*#__PURE__*/(0,r.jsxs)(i.Lt,{anchor:e,disableMobileUI:!0,id:F,idealDirection:H,isWithinFixedContainer:!ei,onDismiss:t,zIndex:V,children:[o&&(Y?/*#__PURE__*/(0,r.jsxs)(i.Lt.Section,{label:W.bt("You're no longer logged in to", "Oh no! You're no longer logged into", "header.accountsOptionsMenu.failedAccount", undefined, true),children:[/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{onSelect:()=>{},option:ee.failedAccount,children:/*#__PURE__*/(0,r.jsx)(b.Z,{user:Y})}),/*#__PURE__*/(0,r.jsx)(R,{failedAccount:Y,handleReauthAccount:X,handleRemoveUnauthAccount:Q})]}):[/*#__PURE__*/(0,r.jsx)(i.Lt.Section,{label:W.bt("Currently in", "Currently in", "SwitchAccountsList.CurrentlyInTitle", undefined, true),children:!!et&&/*#__PURE__*/(0,r.jsx)(i.Lt.Item,{onSelect:()=>en?J(et,void 0):K(et),option:ee.currentAccount,selected:ee.currentAccount,children:/*#__PURE__*/(0,r.jsx)(i.rU,{href:f?`/${et.username}/`:`${$.C0}/${et.username}/`,underline:"none",children:/*#__PURE__*/(0,r.jsx)(b.Z,{isCurrentAccount:!0,user:et})})})},"currently-in"),es]),g?ea:null]})})}},803405:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(883119),s=n(559028),a=n(144326),l=n(424583),o=n(785893);function r(e){return e.partner?.isLinkedBusiness?e.partner.businessName||e.fullName||e.username:e.fullName||e.username}function c({user:e,isCurrentAccount:t}){let n=(0,a.ZP)(),c=e.partner,u=(0,l.mN)()(e.id??""),d=u?.avatar_color_index;return/*#__PURE__*/(0,o.jsxs)(i.xu,{alignItems:"center","data-test-id":"HeaderAccountsOptionsMenuAccountRep",display:"flex",justifyContent:"start",marginEnd:4,rounding:2,children:[/*#__PURE__*/(0,o.jsx)(i.xu,{flex:"none",height:60,marginEnd:2,rounding:"circle",width:60,children:/*#__PURE__*/(0,o.jsx)(s.qE,{accessibilityLabel:"",color:d,name:r(e),src:function(e){let{imageMediumUrl:t}=e;return t&&!t.includes("static/images/user/default")?t:""}(e)})}),/*#__PURE__*/(0,o.jsxs)(i.xu,{maxWidth:176,children:[/*#__PURE__*/(0,o.jsx)(i.xv,{lineClamp:1,weight:"bold",children:r(e)}),/*#__PURE__*/(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"2px"}},"data-test-id":"header-account-type-display",children:/*#__PURE__*/(0,o.jsx)(i.xv,{color:"subtle",lineClamp:1,size:"200",children:c?n.bt("Business", "Business", "SwitchAccountsListItem.BusinessAccount.label", undefined, true):n.bt("Personal", "Personal", "SwitchAccountsListItem.PersonalAccount.label", undefined, true)})}),t&&/*#__PURE__*/(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"2px"}},children:/*#__PURE__*/(0,o.jsx)(i.xv,{color:"subtle",lineClamp:1,size:"200",children:c?e.partner?.bizContactEmail:e.email})})]})]})}},527469:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(488792),s=n(128581),a=n(677388),l=n(271615),o=n(383399);function r(){let e=(0,o.Z)(),t=(0,i.Z)(),n=(0,a.aU)();return function(){t({event_type:101,component:8,element:8005}),(0,l.lv)()>1?(e.isAuth&&((0,s.RD)(e.id),(0,s.CV)("utils.user_deleted",{deleted_user:e.id})),n({redirectUrl:"/",source:"user_header",localStorageItems:(0,l.Q)()})):((0,s.CV)("utils.group_deleted"),n({redirectUrl:"/",source:"user_header"}))}}},319162:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),s=n(616550),a=n(252071),l=n(961754),o=n(383399),r=n(573706),c=n(395225),u=n(635284),d=n(774980),_=n(128581),p=n(635258),h=n(195737),m=n(554743),g=n(415787);function f(e,t){let{flushContextEvents:n,logContextEvent:f}=(0,r.v)(),[v,b]=(0,i.useState)(!1),[y,w]=(0,i.useState)(null),C=(0,s.k6)(),x=(0,o.Z)(),{showAccountSwitcherLoginModal:A}=(0,h.g)(),S=()=>{A("account_switcher_flyout",y?.email)},{userAccounts:P}=(0,m.N)(),{data:Z}=function(){let e=(0,o.Z)();return(0,l.Z)({name:"UserResource",options:{field_set_key:"linked_partner",user_id:e.isAuth&&e.id}})}(),L=(0,c.Z)(),I=!!(x.isAuth&&!x.partner&&Z?.businesses)&&0===Z.businesses.length;(0,i.useEffect)(()=>(x.isAuth&&(0,_.Mt)(x,Z),()=>{(0,_.CV)("flyout.dismiss")}),[]),(0,i.useEffect)(()=>((0,_.CV)("modal.shown"),()=>{(0,_.CV)("modal.dismiss")}),[]),(0,i.useEffect)(()=>{P.length>1&&f({event_type:13,view_type:234,component:13369,element:12722})},[f,P]);let k=(e,t)=>{throw(0,_.z3)(e,"account_switcher_flyout"),b(!1),t},M=e=>{let{id:t}=e;b(!0),f({event_type:101,component:13369,element:11196}),(0,_.CV)("switch_account_click",{destination_user_id:t},"account_switcher_flyout"),u.Z.pause(d.LU),n(!0),L({creds:{get_user:!0,switch_account:t},loggingOptions:{loggingData:{container:"account_switcher"},loginAttemptContextEvent:{event_type:7534,view_type:234,component:13369,aux_data:{upsell_reason:"account_switcher"}}},isAccountSwitch:!0}).then((n={})=>{n?.resource_response.data?.user?(0,_.iS)("/",t,"account_switcher_flyout"):((0,_.CV)("no_api_access_token",{destination_user_id:t},"account_switcher_flyout"),(0,_.z3)(t,"account_switcher_flyout"),w(e),b(!1))},e=>{k(t,e)})};return{failedAccount:y,fetchedUserAccounts:P,handleAccountRepClick:e=>{x.isAuth&&e.id!==x.id&&M(e)},handleAddSecondaryAccount:()=>{(0,_.CV)("add_account_click",null,"account_switcher_flyout"),f({event_type:101,component:8,element:12756}),e(),C.push("/add-account")},handleClick:t=>{13290!==t&&f({event_type:101,component:8,element:t}),e()},handleLinkedAccountSwitch:(e,i)=>{let{partner:s}=e;if(b(!0),f({event_type:101,component:13369,element:s?.isLinkedBusiness?11195:11194}),u.Z.pause(d.LU),n(!0),s?.isLinkedBusiness){let t={business_id:e.id,get_user:!0,owner_id:i};(0,g.nP)("web.partner.linked_business_account.switch_account_attempt",{sampleRate:1}),L({creds:t,loggingOptions:{loggingData:{container:"account_switcher"},loginAttemptContextEvent:{event_type:7534,view_type:234,component:13369}},isAccountSwitch:!0}).then(()=>{(0,g.nP)("web.partner.linked_business_account.switch_account_success",{sampleRate:1}),(0,_.iS)("/",e.id,"account_switcher_flyout")},t=>{k(e.id,t)})}else a.Z.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{x.isAuth&&((0,_.RD)(x.id),(0,_.iS)(t?`/${e.username}`:"/",x.id,"account_switcher_flyout"))},e=>{x.isAuth&&k(x.id,e)})},handleReauthAccount:()=>{(0,_.CV)("switch_failure_prompt.login_click",null,"account_switcher_flyout"),w(null),S()},handleRemoveUnauthAccount:e=>{(0,_.CV)("switch_failure_prompt.account_removed",{removed_user_id:e},"account_switcher_flyout"),(0,_.RD)(e),w(null)},handleUnlockBusinessTools:()=>{e(),x.isAuth?window.location.href="https://www.pinterest.com/convert-business":C.push(`${p.KDH}?utm_source=pinterest&utm_medium=settings&utm_campaign=convert_settings`),f({event_type:101,component:8,element:10299})},isLoading:v,showUnlockBusinessTools:I}}},40553:(e,t,n)=>{n.d(t,{Dm:()=>a,Y3:()=>s,YG:()=>i});let i=e=>["MOBILE","DESKTOP"].includes(e),s=e=>"STERLING"===e,a=e=>"ANALYTICS"===e},644182:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(883119),s=n(144326),a=n(785893);function l({accessibilityLabel:e,fixedPosition:t,rounding:n}){let l=(0,s.ZP)();return/*#__PURE__*/(0,a.jsxs)(i.xu,{children:[/*#__PURE__*/(0,a.jsx)(i.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,opacity:1,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new i.Ry(101),children:/*#__PURE__*/(0,a.jsx)(i.$j,{accessibilityLabel:e||l.bt("Loading", "Loading", "Label for loading spinner", undefined, true),show:!0})}),/*#__PURE__*/(0,a.jsx)(i.xu,{bottom:!0,color:"default",left:!0,opacity:.7,position:t?"fixed":"absolute",right:!0,rounding:n,top:!0,zIndex:new i.Ry(100)})]})}},656826:(e,t,n)=>{n.d(t,{Z:()=>i});function i(e,t){return e.includes(t)||e.includes(80)}},196074:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(449112),s=n(1006),a=n(228867);let l=(e,t)=>{t?.disableOriginCheck||(0,a.Z)(e)||(e="/",(0,s.My)("url_reset")),(0,i.Z)(e)}},591769:(e,t,n)=>{n.d(t,{Z:()=>a});let i="/business/business-manager/",s="/business/business-hierarchy/",a=(e,t,n,a)=>{switch(e){case"DASHBOARD":return a?`${s}${String(a)}/dashboard/`:`${i}${String(t)}/dashboard/`;case"PEOPLE":return`${i}${String(t)}/employees/`;case"PARTNERS":return`${i}${String(t)}/partners/`;case"AD_ACCOUNTS":return`${i}${String(t)}/ad-accounts/`;case"HISTORY":return`${i}${String(t)}/history/`;case"PEOPLE_DETAIL":return`${i}${String(t)}/employees/${String(n)}/details/`;case"PARTNERS_DETAIL":return`${i}${String(t)}/partners/${String(n)}/details/`;case"SHARED_PARTNERS_DETAIL":return`${i}${String(t)}/shared/${String(n)}/details/`;case"AD_ACCOUNTS_DETAIL":return`${i}${String(t)}/ad-accounts/${String(n)}/details/`;case"PENDING_AD_ACCOUNTS_DETAIL":return`${i}${String(t)}/ad-accounts/pending/${String(n)}/details/`;case"PEOPLE_PENDING_TAB":return`${i}${String(t)}/employees/pending/`;case"PARTNERS_PENDING_TAB":return`${i}${String(t)}/partners/pending/`;case"AD_ACCOUNTS_PENDING_TAB":return`${i}${String(t)}/ad-accounts/pending`;case"AD_ACCOUNTS_CEE_MIGRATION":return`${i}${String(t)}/ad-accounts/cee-migration`;case"PROFILES":return`${i}${String(t)}/profiles/`;case"PROFILES_DETAIL":return`${i}${String(t)}/profiles/${String(n)}/details/`;case"BUSINESS_SECURITY":return`${i}${String(t)}/security/`;case"ASSET_GROUPS":return n?`${i}${String(t)}/asset-groups/?asset_group_id=${String(n)}`:`${i}${String(t)}/asset-groups/`;case"INVOICE_MANAGEMENT":return`${i}${String(t)}/invoice-management/`;case"BUSINESS_HIERARCHY":return`${s}${String(a)}/hierarchy/`;case"BUSINESS_HIERARCHY_BUSINESS_SECURITY":return`${s}${String(a)}/business_security/`;case"MANAGERS":return`${s}${String(a)}/managers/`;case"AUDIENCES":return`${i}${String(t)}/audiences/`;case"SHARED_TAGS":return`${i}${String(t)}/shared-tags/`;case"CATALOGS":return`${i}${String(t)}/catalogs/`;case"BRAND_SAFETY":return`${i}${String(t)}/brand-safety/`;case"BUSINESS_SETTINGS":return`${i}${String(t)}/settings/`;default:return i}}},649175:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(883119),s=n(144326),a=n(785893);function l(){let e=(0,s.ZP)();return/*#__PURE__*/(0,a.jsx)(i.kC,{alignItems:"center",justifyContent:"center",children:/*#__PURE__*/(0,a.jsx)(i.$j,{accessibilityLabel:e.bt("Loading sign-up form", "Loading signup form", " - ", undefined, true),show:!0})})}},395225:(e,t,n)=>{n.d(t,{Z:()=>A});var i=n(667294),s=n(191855),a=n(252071),l=n(609326),o=n(573706),r=n(914896),c=n(782443),u=n(591692),d=n(267005),_=n(677388),p=n(76367),h=n(484777),m=n(103741),g=n(343544),f=n(398873),v=n(864723),b=n(1006),y=n(711120),w=n(227984),C=n(592305),x=n(415787);function A(){let e=(0,_.hq)(),t=(0,h.Z)(),{logContextEvent:n}=(0,o.v)(),A=(0,y.Z)();return(0,i.useCallback)(({creds:i,isAccountSwitch:o,loggingOptions:{loggingData:_={},loginAttemptContextEvent:h},recaptchaV2Token:y,recaptchaV3Token:S})=>{t();let P=!!(i.facebook_autologin||i.autologin),Z=(0,p.eD)(i),L=e=>{let t=i.google_open_id_token?"google":"facebook";P&&(0,b.dy)({event:e,provider:t})},I=e=>{P||(0,b.EX)({event:e,provider:(0,p.nY)(i)})},k=e=>{n({...h,event_type:e,aux_data:{...h.aux_data,upsell_reason:h.aux_data?.upsell_reason||(P?"autologin":(0,v.M0)().getItem(l.bg)),upsell_view_count:(0,v.M0)().getItem(l.w0)??0}}),7536===e&&((0,v.M0)().setItem(l.V6,(0,p.nY)(i)),(0,v.M0)().setItem(l.w0,0))};k(7534),A({action:P?"autologin":"login",event:"attempt",trigger:_.trigger,type:Z});let M=e=>{let t="referrer_unknown";try{let e=document.referrer;t=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(e){}let n=_===Object(_)?_.container:"container_unknown";(0,b.My)("login.referrer."+t+"."+Z),(0,b.My)("login.container."+String(n)+"."+Z),(0,b.My)("login.type."+Z);let s=Z||"method_unknown",a=_.page||"page_unknown";i.facebook_autologin?((0,b.My)("web_autologin_facebook"),(0,b.My)("new_web_autologin_facebook",{page:a,referrer:t,container:n})):((0,b.My)(`web_login.${s}.success.${a}.${String(n)}.${t}.tier1`),(0,x.nP)(`web_login.${s}.success.${a}.${String(n)}.${t}.tier1`),(0,b.My)(`new_web_login.${s}.success`,{page:a,referrer:t,container:n})),(0,m.ko)({country:e?.country,countryFromHostName:e?.countryFromHostName,countryFromIp:e?.countryFromIp,regionFromIp:e?.regionFromIp,deviceType:"Desktop",eventCategory:"Logins"}),k(7536),A({action:P?"autologin":"login",event:"success",trigger:_&&_.trigger,type:Z})},E=({error:e})=>{if(!e)return;let t=e.http_status===g.Ej?g.Ej:e.api_error_code,n=t;t&&d.qF.has(t)&&(n=d.qF.get(t));let{container:i,trigger:s}=_;(0,b.My)(`unauth_web_client_login_api_error.${String(n)}.${i||"unknow_container"}.${Z}`),k(7535),A({action:P?"autologin":"login",event:"fail",trigger:s,type:Z})};L("login_api_call_start"),I("login_api_call_start");let T=(0,w.O)();return a.Z.create("UserSessionResource",{...i,...T?{referrer:T}:Object.freeze({}),get_user:i.get_user||i.switch_account&&o,app_type_from_client:7===e.appType?7:5,visited_pages_before_login:(0,C.t_)()||null,recaptchaV2Token:y,recaptchaV3Token:S}).callCreate({showError:!1,async:!0}).then(e=>{let{country:t,country_from_hostname:n,country_from_ip:i,region_from_ip:a}=e?.client_context||Object.freeze({});return M({country:t,countryFromHostName:n,countryFromIp:i,regionFromIp:a}),L("login_api_call_success"),I("login_api_call_success"),(0,c.B)(!1),(0,u.Z)(),r.zN(s.e7.name),r.zN(s.x3.name),(0,f.Z)("login").then(()=>e)},e=>(E({error:e}),L("login_api_call_failure"),I("login_api_call_failure"),Promise.reject(e)))},[e,t,n,A])}},782443:(e,t,n)=>{n.d(t,{B:()=>l,a:()=>a});var i=n(609326),s=n(864723);let a=()=>!!s.ZP.getItem(i.WM),l=e=>{s.ZP.setItem(i.WM,!!e)}},777396:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(566344);let s=()=>{let{hostname:e}=window.location,t=e.includes("pinterdev")&&!e.includes("ads.pinterdev"),n=e.includes("pinterest")&&(e.startsWith("www")||e.startsWith("latest")||e.startsWith("testing"));return t||n?e:e.includes("ads-latest")?"latest.pinterest.com":i.Vi}},591692:(e,t,n)=>{n.d(t,{Z:()=>_});var i=n(400416),s=n(1006),a=n(609326),l=n(864723),o=n(786525),r=n(116897),c=n(592305),u=n(333289),d=n(90280);async function _(e){let t=(0,c.ZP)(),n=(0,u.nR)(),_=(0,d.d)(),p=t?t.map(({pageType:e,...t})=>t):null,h={is_register:e??!1};if(p&&(h.unauth_visited_pages=JSON.stringify(p)),n&&(h.invite_redemption=JSON.stringify(n)),_&&(h.paid_landing=JSON.stringify(_)),p||n||_){let e=await (0,i.Z)({url:"/v3/orientation/user_landing_signals/",method:"POST",data:h});(0,s.My)(`landing_signals.flush.${e.status}`),(0,c.t_)()&&(0,o.L_)(r.tz),(0,l.M0)().removeItem(a.ny),(0,l.M0)().removeItem(a.Vb),(0,l.M0)().removeItem(a.T6),(0,l.M0)().removeItem(a.fb),(0,l.M0)().removeItem(a.Mi)}}},899544:(e,t,n)=>{n.d(t,{Z:()=>i});function i(){window&&window.focus(),document.activeElement&&document.activeElement.blur()}},128581:(e,t,n)=>{n.d(t,{CV:()=>o.Z,Mt:()=>u,RD:()=>c,iS:()=>d,z3:()=>_});var i=n(449112),s=n(635284),a=n(774980),l=n(654381),o=n(475813),r=n(271615);let c=e=>{let t={...(0,r.rl)()};delete t[e],(0,r.r8)(t)},u=(e,t)=>{if(!(0,r.PE)()||e&&!(e.id in(0,r.rl)())){if(e.partner&&e.partner.is_linked_business&&t){(0,l.Z)({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});return}(0,l.Z)(e)}},d=(e,t,n)=>{(0,o.Z)("switch_account_success",{destination_user_id:t},n),(0,i.Z)(e)},_=(e,t)=>{s.Z.resume(a.Z3),(0,o.Z)("switch_account_failure",{destination_user_id:e},t)}},654381:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(475813),s=n(271615);let a=e=>{let t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return(t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||(0,i.Z)("utils.incomplete_user_values"),e.partner?.is_create)?{...t,partner:{is_create:!0}}:t},l=(e,t,n)=>{(0,s.r8)({...(0,s.rl)(),[e.id]:a(e)}),t&&n&&(0,i.Z)("new_account_add_success",{method:t,user_added:e.id},n)}},475813:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(172045),s=n(271615),a=n(1006);let l="web_account_switcher",o=()=>{let e=(0,i.Z)();return(0,a.tj)(`${l}.utils.group_created`,{group_id:e,group_count:(0,s.lv)()}),e},r=(e,t,n)=>{let i=(0,s.yW)();i||(i=o(),(0,s.M3)(i));let r={group_count:(0,s.lv)()},c="";n&&(c="account_switcher_modal"===n?"modal.":"flyout."),(0,a.tj)(`${l}.${c}${e}`,{...t,...r})}},677388:(e,t,n)=>{n.d(t,{aU:()=>l,hq:()=>a,o_:()=>i});let{Provider:i,useHook:s}=(0,n(498490).Z)("AuthenticationContext");function a(){return s().loginContext}function l(){return s().logout}},375182:(e,t,n)=>{n.d(t,{Kw:()=>o,RD:()=>r,dD:()=>u});var i=n(252071),s=n(400416),a=n(271615);let l=["partner.biz_ownership_email","partner.business_name","partner.contact_email","partner.contact_phone","partner.contact_phone_country()","partner.enable_profile_address","partner.enable_profile_message","partner.is_linked_business","partner.profile_place()","place.country","place.extra_street","place.locality","place.postal_code","place.region","place.street","user.businesses()","user.email","user.fast_advertiser_info_has_any_managed_advertisers","user.full_name","user.id","user.image_medium_url","user.owners()","user.partner()","user.username"],o=async()=>{let e=await i.Z.create("UserSessionResource",{session_accounts:!0}).callCreate();return e.resource_response.data?.session_accounts||{}},r=(e,t)=>{let n=Object.freeze({});try{n=(0,a.rl)()}catch{e(`${t}.removeAccountDataFromLocalStorage.jsonParseFailed`)}let i=Object.keys(n);if(e(`${t}.removeAccountDataFromLocalStorage.start`),0===i.length||n[i[0]].logged_in){e(`${t}.removeAccountDataFromLocalStorage.early_return`);return}let s=i.reduce((e,t)=>({...e,[t]:{logged_in:!0}}),{});(0,a.r8)(s),e(`${t}.removeAccountDataFromLocalStorage.updated`)},c=e=>({id:e.id,username:e.username,email:e.email,fullName:e.full_name,imageMediumUrl:e.image_medium_url,imageLargeUrl:e.image_large_url||"",owners:e.owners||null,partner:e.partner?{bizContactEmail:e.partner?.contact_email||"",bizOwnershipEmail:e.partner?.biz_ownership_email||e.email||"",businessName:e.partner?.business_name,isLinkedBusiness:e.partner?.is_linked_business}:null,businesses:(e?.businesses||[]).map(t=>({...c(t),partner:{bizContactEmail:t.partner?.contact_email||"",bizOwnershipEmail:t.partner?.biz_ownership_email||e.email||"",businessName:t.partner?.business_name??"",isLinkedBusiness:t.partner?.is_linked_business??!1}}))}),u=async e=>{let t=await o(),n=e.id;t[n]||(t[n]={logged_in:!0});let i=Object.keys(t||{}).map(e=>({uri:`v3/users/${e}/`,method:"GET",params:{fields:l.join(",")}})),a=(await (0,s.Z)({url:"/v3/batch/",method:"POST",data:{requests:JSON.stringify(i)}})).resource_response.data;return a&&Object.keys(a).length>0?function(e){let t=e.every(e=>!!e.fullName)?"fullName":"username";return[...e].sort((e,n)=>e[t]>n[t]?1:n[t]>e[t]?-1:0)}(Object.keys(a).filter(e=>"success"===a[e].status).map(e=>c(a[e].data))):[]}},76367:(e,t,n)=>{n.d(t,{Ny:()=>d,ZP:()=>p,eD:()=>m,lp:()=>h,nY:()=>g});var i=n(609326),s=n(196074),a=n(719174),l=n(864723),o=n(635258),r=n(1006),c=n(720398),u=n(976534);let d=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6});class _{static defaultLoginRedirectUrl(){return window.location.pathname===o.lfe||window.location.pathname===o.ZEf||window.location.pathname.startsWith("/add-account")?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith("/add-account")?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){let e=l.ZP.getItem(i.kl);if(e&&e.indexOf("|")>-1){let t=e.split("|");return 3===t.length&&new Date().getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){let e=l.ZP.getItem(i.kl),t=[];e&&3===(t=e.split("|")).length&&t.shift();let n=(new Date().getTime()/1e3).toString();t.push(n);let s=t.join("|");l.ZP.setItem(i.kl,s)}static isFullyLoggedIn(e,t){return e&&t===a.Z.DEFAULT}static handleRedirect(e){if(!e){e="/";let t=(0,u.Z)();if(t){let n=t.next;n&&(e=n,delete t.next),e=(0,c.Z)(e||"/",t)}}(0,s.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){l.ZP.setItem(i.F6,Date.now()),!t&&e&&"/"!==e?_.handleRedirect(e):_.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){let t=window.navigator.credentials;if(t&&e.username_or_email)try{let n=new window.PasswordCredential({id:e.username_or_email,password:e.password});t.store(n).then(()=>{(0,r.My)("navigatorCredentials.store.success")})}catch(e){(0,r.My)("navigatorCredentials.store.error")}}static handleLoginMfa(e,t,n){(0,r.My)("multi_step_login"),_.storeLoginCredentialsToBrowser(e),n?n(e,t):(0,r.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}let p=_;function h(e){return e.facebook_id?"facebook":e.google_open_id_token?"google_one_tap":e.line_id_token?"line":e.username_or_email?"email":"other"}function m(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":h(e)}function g(e){return e.facebook_id?"facebook":e.google_open_id_token?"google":e.username_or_email?"email":"other"}},271615:(e,t,n)=>{n.d(t,{M3:()=>c,PE:()=>l,Q:()=>u,lv:()=>o,r8:()=>a,rl:()=>s,yW:()=>r});var i=n(864723);let s=()=>(0,i.M0)().getItem("MULTIPLE_ACCOUNTS")??Object.freeze({}),a=e=>(0,i.M0)().setItem("MULTIPLE_ACCOUNTS",e),l=()=>null!==(0,i.M0)().getItem("MULTIPLE_ACCOUNTS"),o=()=>Object.keys(s()).length,r=()=>(0,i.M0)().getItem("MULTIPLE_ACCOUNTS_GROUP"),c=e=>(0,i.M0)().setItem("MULTIPLE_ACCOUNTS_GROUP",e),u=()=>({multipleAccountMap:s(),multipleAccountGroupId:r()})},484777:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),s=n(297728);let a=()=>{let e=(0,s.F)();return(0,i.useCallback)(()=>{e.flush()},[e])}},616949:(e,t,n)=>{n.d(t,{Z:()=>o,h:()=>l});var i=n(172045),s=n(17314);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now(),o=class{constructor(e){a(this,"start",()=>(this.startTime=l(),this.startTime)),a(this,"end",()=>(this.endTime=l(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,i.Z)()}catch(e){this.uuid=(0,s.Z)()}e&&Object.assign(this,e)}}},711120:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),s=n(888775),a=n(1006);function l(){return(0,i.useCallback)(e=>{e.action&&e.event?(0,a.My)("pinner_conversion",{...e,type:e.type||"none",trigger:e.trigger||"other",referrer:(0,s.Z)()}):(0,a.My)("pinner_conversion.missing_tags")},[])}},343389:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(883119),s=n(133323),a=n(785893);function l({accessibilityLabel:e,color:t,count:n,icon:l,iconSize:o,verticalNavCustomSvgBackgroundUrl:r}){let c=n<100?`${n}`:"99+";return/*#__PURE__*/(0,a.jsxs)(i.xu,{position:"relative",children:[r?/*#__PURE__*/(0,a.jsx)(s.d,{svgBackgroundImageUrl:r}):/*#__PURE__*/(0,a.jsx)(i.JO,{accessibilityLabel:e,color:t,icon:l,size:o}),n>0&&/*#__PURE__*/(0,a.jsx)(i.xu,{alignItems:"center",color:"primary",dangerouslySetInlineStyle:{__style:{right:-6-2*c.length,top:-8,padding:`0 ${3===c.length?"2px":"3px"} 0 2px`}},"data-unadopted-gestalt":"Indicator",display:"flex",height:18,justifyContent:"center",minWidth:18,position:"absolute",rounding:"pill",children:/*#__PURE__*/(0,a.jsx)(i.xv,{align:"center",color:"inverse",size:"100",weight:"bold",children:/*#__PURE__*/(0,a.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{padding:"0 0 1px 1px"}},children:c})})})]})}},809604:(e,t,n)=>{n.d(t,{Z:()=>a});let i=(e,t)=>0===e.lastIndexOf(t,0);var s=n(54473);let a=({url:e})=>{let t=(0,s.Z)("/");return i(e,t)?e.substr(t.length-1):e}},453854:(e,t,n)=>{n.d(t,{Z:()=>l,q:()=>a});var i=n(667294);let s=()=>{let[e,t]=(0,i.useState)(!1),[n,s]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1);return{active:e,focused:n,hovered:a,onBlur:()=>{s(!1),t(!1)},onFocus:()=>s(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>l(!0),onMouseLeave:()=>{l(!1),t(!1)},onMouseUp:()=>t(!1)}};function a({children:e}){return e(s())}let l=s},139092:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(969119),s=n(830017);function a({children:e}){let{setAppFocusState:t}=(0,s.I)();return(0,i.Z)(()=>(t(!1),()=>{t(!0)})),e}},697843:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(400416);function s(){return async()=>{let e=await (0,i.Z)({url:"/ads/v4/business_access/businesses/me/employers/"}),t=e.resource_response?e.resource_response.data:{data:[]};return await Promise.all(t&&t.data||[])}}},366513:(e,t,n)=>{n.d(t,{Z:()=>i});function i(e){return{type:"UPDATE_VIEWER_IS_PROFILE_OWNER_OR_PROFILE_MANAGER",payload:e}}},689567:(e,t,n)=>{n.d(t,{Z:()=>i});let i=({businessAccess:e})=>e??{}},553740:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(616550);function s(){let{catalog_id:e,feed_profile_id:t,workflow_id:n,product_group_id:s,event_type_id:a,supplemental_feed_profile_id:l}=(0,i.UO)();return{catalogId:e,feedProfileId:t,workflowId:n,productGroupId:s,eventTypeId:a,supplementalFeedProfileId:l}}},19670:(e,t,n)=>{n.d(t,{q:()=>_,y:()=>p});var i=n(667294),s=n(297728),a=n(730212),l=n(319453),o=n(400416);function r(e,t){(0,l.TT)(t)&&(0,o.Z)({method:"PUT",url:`/ads/v4/preferences/${e}/`,data:{level:"ADVERTISER",key:"CAMPAIGN_TOOL_PREFERENCE",preferences:t}})}var c=n(605935),u=n(785893);let d=(0,i.createContext)({campaignToolPreference:null,updateCampaignToolPreference:r}),_=({children:e})=>{let[t,n]=(0,i.useState)(null),o=(0,s.F)(),{advertiser:_}=(0,a.B)(),p=async(e,t)=>{r(e,t),n(t)};(0,i.useEffect)(()=>{(0,l.UM)(o,{skipActivation:!0})&&(async()=>{_&&n(await (0,c.f)(_.id))})()},[_,o]);let h=(0,i.useMemo)(()=>({campaignToolPreference:t,updateCampaignToolPreference:p}),[t]);return/*#__PURE__*/(0,u.jsx)(d.Provider,{value:h,children:e})},p=()=>(0,i.useContext)(d)},605935:(e,t,n)=>{n.d(t,{Z:()=>d,f:()=>u});var i=n(667294),s=n(400416),a=n(297728),l=n(730212),o=n(319453);let r="ADVERTISER",c=(e,t)=>e&&e[t]&&e[t][0]&&e[t][0].preferences,u=async e=>{let t;try{let n=(await (0,s.Z)({method:"GET",url:`/ads/v4/preferences/${e}/`,data:{level:r,key:"CAMPAIGN_TOOL_PREFERENCE"}})).resource_response.data;t=c(n,r)}catch{return null}return t&&(0,o.TT)(t)?t:null},d=()=>{let[e,t]=(0,i.useState)(null),n=(0,a.F)(),{advertiser:s}=(0,l.B)();return(0,i.useEffect)(()=>{(0,o.UM)(n,{skipActivation:!0})&&(async()=>{s&&t(await u(s.id))})()},[s,n]),e}},445022:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(883119),s=n(649175),a=n(144326),l=n(327342),o=n(179735),r=n(785893);let c=(0,o.Z)(()=>Promise.all([n.e(97270),n.e(16458)]).then(n.bind(n,338513)),void 0,"FullPageSignup");function u(e){let t=(0,a.ZP)();return/*#__PURE__*/(0,r.jsx)(l.Z,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>/*#__PURE__*/(0,r.jsx)(i.xu,{"data-test-id":"account-switcher-modal",display:"flex",flex:"grow",justifyContent:"center",children:/*#__PURE__*/(0,r.jsx)(c,{attributionLabel:e.attributionLabel,container:e.container,customLoginTagline:e.customTaglineText||t.bt("Add account", "Add account", "Short text on the button that allows a user to log in to another Pinterest account", undefined, true),fallback:/*#__PURE__*/(0,r.jsx)(s.Z,{}),hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,isAccountSwitch:!0,signupFlow:{type:"login",email:e.email},signupSource:"login"})})})}},195737:(e,t,n)=>{n.d(t,{T:()=>c,g:()=>r});var i=n(667294),s=n(498490),a=n(445022),l=n(785893);let{Provider:o,useHook:r}=(0,s.Z)("AccountSwitcherLoginModal");function c({children:e}){let[t,n]=(0,i.useState)(!1),[s,r]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),d=(0,i.useCallback)((e,t)=>{u(e),t&&r(t),n(!0)},[]),_=(0,i.useMemo)(()=>({showAccountSwitcherLoginModal:d}),[d]);return/*#__PURE__*/(0,l.jsxs)(i.Fragment,{children:[/*#__PURE__*/(0,l.jsx)(o,{value:_,children:e}),t&&/*#__PURE__*/(0,l.jsx)(a.Z,{container:c,email:s??"",onClose:()=>n(!1)})]})}},327342:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(883119),s=n(144326),a=n(512541),l=n(154785),o=n(785893);let r=`
.AccountSwitcherModal {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
`,c={backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},u={WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},d={display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},_={overflow:"hidden",position:"fixed",right:"24px",top:"24px"};function p(e){let t=(0,s.ZP)(),n=(0,l.Z)(),{renderContent:p}=e;return/*#__PURE__*/(0,o.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:c},children:[/*#__PURE__*/(0,o.jsx)(a.Z,{unsafeCSS:r}),/*#__PURE__*/(0,o.jsx)("div",{className:"AccountSwitcherModal",onClick:()=>{n({action:"click",item:"wash-button",within:"account-switcher-modal"});let{onCloseClick:t}=e;t()},role:"dialog",style:u,children:/*#__PURE__*/(0,o.jsxs)("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:d,children:[p(),/*#__PURE__*/(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:_},children:/*#__PURE__*/(0,o.jsx)(i.hU,{accessibilityLabel:t.bt("close", "close", "accessible label for close button", undefined, true),bgColor:"transparent",icon:"cancel",iconColor:"white",onClick:()=>{n({action:"dismiss",item:"close-button",within:"account-switcher-modal"});let{onCloseClick:t}=e;t()}})})]})})]})}},554743:(e,t,n)=>{n.d(t,{N:()=>o,t:()=>r});var i=n(667294),s=n(498490),a=n(785893);let{Provider:l,useHook:o}=(0,s.Z)("LinkedAccount");function r({children:e}){let[t,n]=(0,i.useState)([]),s=(0,i.useMemo)(()=>({userAccounts:t,userAccountsRetrieved:n}),[n,t]);return/*#__PURE__*/(0,a.jsx)(l,{value:s,children:e})}},877709:(e,t,n)=>{n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(()=>null)},922664:(e,t,n)=>{n.d(t,{Z:()=>a,k:()=>i});let{Provider:i,useHook:s}=(0,n(498490).Z)("Conversations"),a=s},500238:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(922664);function s(){let{conversations:{data:e}}=(0,i.Z)();return Array.from(Object.keys(e).map(t=>e[t]).filter(e=>e.users&&e.last_message)).sort((e,t)=>new Date((t.last_message||t).created_at).getTime()-new Date((e.last_message||e).created_at).getTime())}},732567:(e,t,n)=>{n.d(t,{C:()=>i,Z:()=>a});let{Provider:i,useHook:s}=(0,n(498490).Z)("Header"),a=s},311468:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),s=n(883119),a=n(503546),l=n(573706),o=n(989820),r=n(402189),c=n(785893);let u=({anchorElementRef:e,children:t,experienceAnchor:n})=>n?/*#__PURE__*/(0,c.jsx)(o._7,{anchor:".HomeButton2",anchorElementRef:e.current,containerBoxConfig:{display:"flex",height:"100%"},children:t}):t,d=({accessibilityLabel:e,compactMode:t,icon:n,rightIcon:o,selected:d,text:_,type:p="link",url:h,contextData:m,onClick:g})=>{let{logContextEvent:f}=(0,l.v)(),{enabled:v}=(0,a.Z)(),[b,y]=(0,i.useState)("transparent"),[w,C]=(0,i.useState)("transparent"),x=(0,i.useRef)(null),A=()=>{y("secondary"),C(r.bT)},S=()=>{y("transparent"),C("transparent")},P=()=>{y("transparent")},Z=()=>{y("secondary")},L=e=>{if(m){let{event:e,component:t,element:n}=m;f({event_type:e,component:t,element:n})}g&&g(e)},I=/*#__PURE__*/(0,c.jsx)(s.iP,{accessibilityLabel:e,onBlur:P,onFocus:Z,onMouseEnter:A,onMouseLeave:S,onTap:({event:e})=>L(e),rounding:v?r.uW:"circle",children:/*#__PURE__*/(0,c.jsx)(s.xu,{alignItems:"center",color:v?void 0:b,dangerouslySetInlineStyle:v?{__style:{backgroundColor:w}}:void 0,display:"flex",height:48,justifyContent:"center",rounding:v?r.uW:"circle",width:48,children:n})});if(o||"link"!==p||!h||t){if("link"===p&&(t&&n||o)){let i,a,l="pill";l=n||o?_&&!t?"pill":"circle":"pill",n&&(i=n),o&&(a=o);let r=_ instanceof Object?_:/*#__PURE__*/(0,c.jsx)(s.xv,{color:d?"default":"subtle",overflow:"normal",size:"200",weight:"bold",children:_});I=/*#__PURE__*/(0,c.jsx)(s.Tg,{accessibilityLabel:e,href:h||"",onBlur:P,onFocus:Z,onMouseEnter:A,onMouseLeave:S,onTap:({event:e})=>L(e),rounding:l,children:/*#__PURE__*/(0,c.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[i,!!_&&!t&&/*#__PURE__*/(0,c.jsx)(s.xu,{paddingX:2,children:r}),a]})})}}else I=/*#__PURE__*/(0,c.jsx)(u,{anchorElementRef:x,experienceAnchor:"/"===h?".HomeButton2":"",children:/*#__PURE__*/(0,c.jsx)(s.Tg,{ref:x,accessibilityLabel:e,href:h,onBlur:P,onFocus:Z,onMouseEnter:A,onMouseLeave:S,onTap:({event:e})=>L(e),rounding:"pill",children:/*#__PURE__*/(0,c.jsx)(s.xu,{color:v?void 0:b,dangerouslySetInlineStyle:v?{__style:{backgroundColor:w}}:void 0,paddingX:4,paddingY:4,rounding:"pill",children:/*#__PURE__*/(0,c.jsx)(s.xv,{color:d?"default":"subtle",overflow:"normal",weight:"bold",children:_})})})});return/*#__PURE__*/(0,c.jsx)(s.xu,{position:"relative",children:I})}},781456:(e,t,n)=>{n.d(t,{F:()=>i,j:()=>s});let{Provider:i,useHook:s}=(0,n(498490).Z)("SiteParametersContextType")},133323:(e,t,n)=>{n.d(t,{E:()=>c,d:()=>r});var i=n(667294),s=n(883119),a=n(876594),l=n(402189),o=n(785893);let r=({svgBackgroundImageUrl:e,inline:t,verticalAlign:n,ariaLabel:i})=>/*#__PURE__*/(0,o.jsx)(s.xu,{"aria-label":i,dangerouslySetInlineStyle:{__style:{backgroundSize:"cover",backgroundImage:e,verticalAlign:n}},display:t?"inlineBlock":"block",height:l.ZG,width:l.ZG}),c=(0,i.forwardRef)(({tooltipText:e,href:t,selectedSvgUrl:n,defaultSvgUrl:c,selected:u,onSelect:d},_)=>{let[p,h]=(0,i.useState)("transparent"),m=()=>{h(a.Kuk)},g=()=>{h("transparent")},f=/*#__PURE__*/(0,o.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:p}},display:"flex",height:48,justifyContent:"center",rounding:l.uW,width:48,children:/*#__PURE__*/(0,o.jsx)(r,{ariaLabel:e,svgBackgroundImageUrl:u?n:c})});return/*#__PURE__*/(0,o.jsx)(s.u,{idealDirection:l.Mh,text:e,zIndex:l.BO,children:t?/*#__PURE__*/(0,o.jsx)(s.Tg,{ref:_,href:t,onMouseEnter:m,onMouseLeave:g,onTap:d,rounding:l.uW,children:f}):/*#__PURE__*/(0,o.jsx)(s.iP,{ref:_,onMouseEnter:m,onMouseLeave:g,onTap:d,rounding:l.uW,children:f})})})},168470:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(402189);let s={home:{default:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.3217 0.307444C11.7345 0.0407477 12.2654 0.0407477 12.6782 0.307444L22.3616 6.56277C22.7181 6.79303 22.9334 7.1884 22.9334 7.61275V23.25H1.06653V7.61275C1.06653 7.1884 1.28181 6.79303 1.63826 6.56277L11.3217 0.307444ZM3.56653 8.2934V20.75H20.4334V8.2934L11.9999 2.84555L3.56653 8.2934Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 16.0469V20.5H14.2344V23H16.75V16.0469C16.75 13.4235 14.6234 11.2969 12 11.2969C9.37665 11.2969 7.25 13.4235 7.25 16.0469V23H9.75V20.5V20.1094V16.0469C9.75 14.8042 10.7574 13.7969 12 13.7969C13.2426 13.7969 14.25 14.8042 14.25 16.0469Z" fill="black"/></svg>')`,selected:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none"><path d="M21.6834 22H2.31659V7.61275L12 1.35742L21.6834 7.61275V22Z" fill="black"/><path d="M2.31659 22H1.31659V23H2.31659V22ZM21.6834 22V23H22.6834V22H21.6834ZM21.6834 7.61275H22.6834C22.6834 7.27327 22.5112 6.95697 22.226 6.77277L21.6834 7.61275ZM2.31659 7.61275L1.77398 6.77277C1.48882 6.95697 1.31659 7.27327 1.31659 7.61275H2.31659ZM12 1.35742L12.5426 0.51744C12.2123 0.304083 11.7877 0.304083 11.4574 0.51744L12 1.35742ZM2.31659 23H21.6834V21H2.31659V23ZM22.6834 22V7.61275H20.6834V22H22.6834ZM1.31659 7.61275V22H3.31659V7.61275H1.31659ZM22.226 6.77277L12.5426 0.51744L11.4574 2.1974L21.1408 8.45273L22.226 6.77277ZM11.4574 0.51744L1.77398 6.77277L2.8592 8.45273L12.5426 2.1974L11.4574 0.51744Z" fill="black"/><path d="M9.25 17.0469C9.25 15.5281 10.4812 14.2969 12 14.2969C13.5188 14.2969 14.75 15.5281 14.75 17.0469V23.5293H9.25V17.0469Z" fill="white"/></svg>')`},create:{default:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M19 3.5H5C4.17157 3.5 3.5 4.17157 3.5 5V19C3.5 19.8284 4.17157 20.5 5 20.5H19C19.8284 20.5 20.5 19.8284 20.5 19V5C20.5 4.17157 19.8284 3.5 19 3.5ZM5 1C2.79086 1 1 2.79086 1 5V19C1 21.2091 2.79086 23 5 23H19C21.2091 23 23 21.2091 23 19V5C23 2.79086 21.2091 1 19 1H5Z" fill="%23111111"/><path d="M13.25 7C13.25 6.30964 12.6904 5.75 12 5.75C11.3096 5.75 10.75 6.30964 10.75 7V10.75H7C6.30964 10.75 5.75 11.3096 5.75 12C5.75 12.6904 6.30964 13.25 7 13.25H10.75V17C10.75 17.6904 11.3096 18.25 12 18.25C12.6904 18.25 13.25 17.6904 13.25 17V13.25H17C17.6904 13.25 18.25 12.6904 18.25 12C18.25 11.3096 17.6904 10.75 17 10.75H13.25V7Z" fill="%23111111"/></svg>')`,selected:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 1C2.79086 1 1 2.79086 1 5V19C1 21.2091 2.79086 23 5 23H19C21.2091 23 23 21.2091 23 19V5C23 2.79086 21.2091 1 19 1H5ZM12 4.75C12.6904 4.75 13.25 5.30964 13.25 6V10.75H18C18.6904 10.75 19.25 11.3096 19.25 12C19.25 12.6904 18.6904 13.25 18 13.25H13.25V18C13.25 18.6904 12.6904 19.25 12 19.25C11.3096 19.25 10.75 18.6904 10.75 18V13.25H6C5.30964 13.25 4.75 12.6904 4.75 12C4.75 11.3096 5.30964 10.75 6 10.75H10.75V6C10.75 5.30964 11.3096 4.75 12 4.75Z" fill="%23111111"/></svg>')`},today:{default:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_449_32453)"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 21.5C17.2467 21.5 21.5 17.2467 21.5 12C21.5 6.75329 17.2467 2.5 12 2.5C6.75329 2.5 2.5 6.75329 2.5 12C2.5 17.2467 6.75329 21.5 12 21.5ZM12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z" fill="%23111111"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18.3839 5.61609C18.7375 5.96967 18.8463 6.49995 18.6606 6.96423L15.7439 14.2561C15.7415 14.2624 15.739 14.2687 15.7365 14.275C15.4315 15.0368 14.8232 15.6361 14.0591 15.9306L6.94891 18.6666C6.48783 18.844 5.9655 18.7332 5.61615 18.3839C5.2668 18.0346 5.15597 17.5123 5.33336 17.0512L8.06803 9.94284C8.36219 9.17808 8.96156 8.56859 9.72491 8.26414L17.0357 5.33943C17.5 5.15369 18.0303 5.26252 18.3839 5.61609ZM13.4115 13.3556C13.4126 13.3531 13.4136 13.3505 13.4146 13.3479L15.2561 8.74398L10.6512 10.5862C10.5376 10.6315 10.4466 10.7228 10.4014 10.8402L8.67684 15.323L13.1601 13.5978C13.2734 13.5541 13.364 13.4666 13.4115 13.3556Z" fill="%23111111"/></g><defs><clipPath id="clip0_449_32453"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>')`,selected:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_449_32464)"><path d="M12.8672 12.9015C12.9835 12.7854 13.0757 12.6476 13.1386 12.4958C13.2016 12.3441 13.234 12.1815 13.2341 12.0172C13.2342 11.8529 13.202 11.6903 13.1392 11.5385C13.0764 11.3867 12.9843 11.2487 12.8682 11.1325C12.7522 11.0163 12.6143 10.9241 12.4626 10.8611C12.3109 10.7982 12.1482 10.7657 11.984 10.7656C11.8197 10.7655 11.657 10.7978 11.5052 10.8606C11.3534 10.9234 11.2155 11.0154 11.0992 11.1315C10.9832 11.2477 10.8911 11.3857 10.8283 11.5375C10.7655 11.6893 10.7333 11.8519 10.7334 12.0162C10.7336 12.348 10.8655 12.666 11.1002 12.9005C11.335 13.135 11.6532 13.2666 11.985 13.2664C12.3167 13.2662 12.6348 13.1342 12.8692 12.8995L12.8672 12.9015ZM15.1372 14.0335C14.9302 14.5505 14.5172 14.9575 13.9982 15.1575L5.61925 18.3815L8.84225 10.0045C9.04225 9.4845 9.44925 9.0715 9.96625 8.8655L18.5833 5.4185L15.1362 14.0355L15.1372 14.0335ZM20.4853 3.5145C15.7993 -1.1715 8.20125 -1.1715 3.51525 3.5145C-1.17175 8.2015 -1.17175 15.7995 3.51525 20.4855C8.20125 25.1715 15.7993 25.1715 20.4853 20.4855C25.1713 15.7995 25.1713 8.2005 20.4853 3.5145Z" fill="%23111111"/></g><defs><clipPath id="clip0_449_32464"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>')`},notifications:{default:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 14.227V7C16.5 4.51471 14.4853 2.5 12 2.5C9.51471 2.5 7.5 4.51471 7.5 7V14.227L6.73561 14.9643C6.26116 15.422 5.84638 15.9379 5.5032 16.5H18.4968C18.1536 15.9379 17.7388 15.422 17.2644 14.9643L16.5 14.227ZM21.3013 16.5C21.6365 17.2867 21.8745 18.1248 22 19H2C2.12546 18.1248 2.36354 17.2867 2.69865 16.5C3.23694 15.2362 4.0256 14.1049 5 13.165V7C5 3.134 8.134 0 12 0C15.866 0 19 3.134 19 7V13.165C19.9744 14.1049 20.7631 15.2362 21.3013 16.5ZM15 20.9998H9C9 21.1702 9.01421 21.3373 9.0415 21.5C9.18134 22.3334 9.66468 23.0501 10.341 23.4998C10.8161 23.8157 11.3866 23.9998 12 23.9998C12.6134 23.9998 13.1839 23.8157 13.659 23.4998C14.3353 23.0501 14.8187 22.3334 14.9585 21.5C14.9858 21.3373 15 21.1702 15 20.9998Z" fill="%23111111"/></svg>')`,selected:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_449_32470)"><path d="M19 7V13.165C20.581 14.69 21.673 16.719 22 19H2C2.327 16.719 3.419 14.69 5 13.165V7C5 3.134 8.134 0 12 0C15.866 0 19 3.134 19 7Z" fill="%23111111"/><path d="M15 20.9998C15 22.6568 13.657 23.9998 12 23.9998C10.343 23.9998 9 22.6568 9 20.9998H15Z" fill="%23111111"/></g><defs><clipPath id="clip0_449_32470"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>')`},messages:{default:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_800_18532)"><rect width="24" height="24" fill="none"/><path d="M4.6831 18.2737L4.84947 17.6551L4.44456 17.1588C3.07314 15.4778 2.25 13.3365 2.25 11C2.25 5.61536 6.61536 1.25 12 1.25C17.3846 1.25 21.75 5.61536 21.75 11C21.75 16.3846 17.3846 20.75 12 20.75C10.6917 20.75 9.44625 20.4881 8.30368 20.0202L7.75509 19.7956L7.23401 20.0782L3.67907 22.0065L4.6831 18.2737Z" stroke="%23111111" stroke-width="2.5"/><circle cx="6.99219" cy="11.0078" r="1.5" fill="%23111111"/><path d="M13.4961 11.0078C13.4961 11.8362 12.8245 12.5078 11.9961 12.5078C11.1677 12.5078 10.4961 11.8362 10.4961 11.0078C10.4961 10.1794 11.1677 9.50781 11.9961 9.50781C12.8245 9.50781 13.4961 10.1794 13.4961 11.0078Z" fill="%23111111"/><circle cx="17" cy="11.0078" r="1.5" fill="%23111111"/></g><defs><clipPath id="clip0_800_18532"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>')`,selected:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_449_32468)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 12.5C17.172 12.5 16.5 11.829 16.5 11C16.5 10.171 17.172 9.5 18 9.5C18.828 9.5 19.5 10.171 19.5 11C19.5 11.829 18.828 12.5 18 12.5ZM12 12.5C11.172 12.5 10.5 11.829 10.5 11C10.5 10.171 11.172 9.5 12 9.5C12.828 9.5 13.5 10.171 13.5 11C13.5 11.829 12.828 12.5 12 12.5ZM6 9.5C6.828 9.5 7.5 10.171 7.5 11C7.5 11.829 6.828 12.5 6 12.5C5.172 12.5 4.5 11.829 4.5 11C4.5 10.171 5.172 9.5 6 9.5ZM12 0C5.925 0 1 4.925 1 11C1 13.636 1.93 16.054 3.476 17.949L2.016 23.377C1.909 23.805 2.366 24.151 2.749 23.933L7.83 21.177C9.117 21.704 10.523 22 12 22C18.075 22 23 17.075 23 11C23 4.925 18.075 0 12 0Z" fill="%23111111"/></g><defs><clipPath id="clip0_449_32468"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>')`},moreOptions:{default:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_449_32461)"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 7.45081V16.5492L12 21.1206L20 16.5492V7.45081L12 2.87938L4 7.45081ZM12 0L1.5 6V18L12 24L22.5 18V6L12 0Z" fill="%23111111"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9ZM6.5 12C6.5 8.96243 8.96243 6.5 12 6.5C15.0376 6.5 17.5 8.96243 17.5 12C17.5 15.0376 15.0376 17.5 12 17.5C8.96243 17.5 6.5 15.0376 6.5 12Z" fill="%23111111"/></g><defs><clipPath id="clip0_449_32461"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>')`,selected:`url('data:image/svg+xml,<svg width="${i.ZG}" height="${i.ZG}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(%23clip0_449_32472)"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16.25C9.653 16.25 7.75 14.347 7.75 12C7.75 9.653 9.653 7.75 12 7.75C14.347 7.75 16.25 9.653 16.25 12C16.25 14.347 14.347 16.25 12 16.25ZM12 0L1.5 6V18L12 24L22.5 18V6L12 0Z" fill="%23111111"/></g><defs><clipPath id="clip0_449_32472"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>')`}}},44303:(e,t,n)=>{n.d(t,{Jo:()=>u,mv:()=>_,nJ:()=>d});var i=n(667294),s=n(498490);let a={hiddenNews:{}};function l(e=a,t){if("HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS"===t.type){let{payload:{id:n,isHidden:i}}=t;return{hiddenNews:{...e?.hiddenNews,[n]:i}}}return e}var o=n(785893);let{Provider:r,useHook:c}=(0,s.Z)("HiddenNews");function u({children:e}){let[t,n]=(0,i.useReducer)(l,a),s=(0,i.useMemo)(()=>({dispatch:n,hiddenNews:t}),[n,t]);return/*#__PURE__*/(0,o.jsx)(r,{value:s,children:e})}function d(){let{dispatch:e,hiddenNews:{hiddenNews:t}}=c();return(0,i.useMemo)(()=>({updateNewsIdToHiddenNews:(t,n)=>{e({type:"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS",payload:{id:t,isHidden:n}})},getShownNewsCount:e=>e.filter(e=>!(e.id in t&&t[e.id])).length}),[e,t])}function _(){let{hiddenNews:e}=c();return e}},48347:(e,t,n)=>{n.d(t,{Z:()=>p,j:()=>h});var i=n(667294),s=n(498490),a=n(602185),l=n(758339),o=n(144326),r=n(383399),c=n(179735),u=n(785893);let d=(0,c.Z)(()=>n.e(73669).then(n.bind(n,429214)),void 0,"app-www-ReportBug-ReportBug"),{Provider:_,useHook:p}=(0,s.Z)("reportBugModalContext");function h({children:e}){let t=(0,o.ZP)(),[n,s]=(0,i.useState)(!1),c=(0,r.Z)(),p=(0,i.useCallback)(()=>{s(!0)},[]),h=(0,i.useMemo)(()=>({handleShowReportBugModal:p}),[p]);return/*#__PURE__*/(0,u.jsxs)(i.Fragment,{children:[/*#__PURE__*/(0,u.jsx)(_,{value:h,children:e}),n&&c.isAuth&&/*#__PURE__*/(0,u.jsx)(l.ZP,{accessibilityModalLabel:t.bt("Report bug", "Report bug", "header.accountsOptionsMenu.logout", undefined, true),onDismiss:()=>{s(!1)},children:/*#__PURE__*/(0,u.jsx)(a.Z,{name:"SafeSuspense_ReportBugModal_ReportBug",children:/*#__PURE__*/(0,u.jsx)(d,{onDismiss:()=>{s(!1)},username:c.username})})})]})}},442798:(e,t,n)=>{n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)({inboxButton:null,setInboxButton:()=>{},profileInboxButton:null,groupBoardMessageButton:null,setProfileInboxButton:()=>{},isUnblockToast:!1,setIsUnblockToast:()=>{},setGroupBoardMessageButton:()=>{}})},121210:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),s=n(442798);function a(){let e=(0,i.useContext)(s.Z);if(void 0===e)throw Error("useInboxButtonContext must be used within a InboxButtonContext Provider.");return e}},694735:(e,t,n)=>{n.d(t,{Z:()=>C});var i=n(667294),s=n(616550),a=n(883119),l=n(602185),o=n(144326),r=n(282999),c=n(750077),u=n(868808),d=n(922664),_=n(51405),p=n(972420),h=n(241716),m=n(168470),g=n(44303),f=n(785893);let v=()=>n.e(39357).then(n.bind(n,639357)),b=(0,i.lazy)(v);function y({idealTooltipDirection:e,defaultIconColor:t,selectedIconColor:n,onClearBadges:y,zIndex:w,onClick:C,onPanelChange:x,tooltipText:A}){let S=(0,o.ZP)(),P=(0,s.TH)(),Z=(0,i.useRef)(null),[L,I]=(0,i.useState)(!1),[k,M]=(0,i.useState)(!1),[E,T]=(0,i.useState)(!1),[j,O]=(0,i.useState)(!1),{tab:B,news_hub_id:N}=(0,u.mB)(P.search),{conversations:{conversationsUnseenCount:z,newsHubCount:R}}=(0,d.Z)(),$=e=>{if((0,r.L6)(P))return;let t=Math.max(e,0),n=S.bt("Pinterest", "Pinterest", " - ", undefined, true);window.document.title=t?`(${t}) ${n}`:n};return(0,i.useEffect)(()=>{$(z+R),P.pathname.startsWith("/notifications")&&"inbox"!==B&&I(!0)},[z,R]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{M(L),T(L),x?.(L)},100);return()=>clearTimeout(e)},[L]),(0,i.useEffect)(()=>{L&&x?.(L)},[L]),/*#__PURE__*/(0,f.jsxs)(i.Fragment,{children:[/*#__PURE__*/(0,f.jsx)(a.xu,{ref:Z,"data-test-id":"bell-icon",onMouseEnter:v,position:"relative",children:/*#__PURE__*/(0,f.jsx)(a.u,{accessibilityLabel:"",idealDirection:e,text:A||S.bt("Notifications", "Notifications", "navbar.newsButton.tooltip", undefined, true),zIndex:w||new a.H3([new a.Ry(h.fe)]),children:/*#__PURE__*/(0,f.jsx)(p.Z,{badgeCount:R,defaultColor:t,icon:"bell",onClick:()=>{C?.(),I(!L),y(_.S.NEWS_HUB),$(0)},selected:L,selectedColor:n,verticalNavCustomSvgBackgroundUrlDefaultState:m.Z.notifications.default,verticalNavCustomSvgBackgroundUrlSelectedState:m.Z.notifications.selected})})}),/*#__PURE__*/(0,f.jsx)(g.Jo,{children:/*#__PURE__*/(0,f.jsx)("div",{className:"newsHubSidebarWrapper",style:L?{opacity:1,visibility:"visible",transition:"opacity 100ms linear"}:{opacity:0,visibility:"hidden",transition:"visibility 0s 100ms, opacity 100ms linear"},children:k&&/*#__PURE__*/(0,f.jsx)(l.Z,{name:"SafeSuspense_AuthNewsButton_NewsHubSidebar",children:/*#__PURE__*/(0,f.jsx)(c.Z,{children:/*#__PURE__*/(0,f.jsx)(b,{handleDismissPanel:()=>{I(!1),O(!1)},highlightScrollSidebar:j,newsButton:Z.current,show:E,utmNewsHubId:N||null})})})})})]})}var w=n(886792);function C({idealTooltipDirection:e,defaultIconColor:t,selectedIconColor:n,zIndex:i,onClick:s,onPanelChange:a,tooltipText:l}){return/*#__PURE__*/(0,f.jsx)(w.Z,{icon:"bell",children:({onClearBadges:o})=>/*#__PURE__*/(0,f.jsx)(y,{defaultIconColor:t,idealTooltipDirection:e,onClearBadges:o,onClick:s,onPanelChange:a,selectedIconColor:n,tooltipText:l,zIndex:i})})}},972420:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(503546),s=n(144326),a=n(343389),l=n(311468),o=n(785893);function r({badgeCount:e=0,icon:t="speech-ellipsis",onClick:n,selected:r=!1,defaultColor:c="subtle",selectedColor:u="default",verticalNavCustomSvgBackgroundUrlDefaultState:d,verticalNavCustomSvgBackgroundUrlSelectedState:_}){let p=(0,s.ZP)(),h={bell:p.bt("Notifications", "Notifications", " - ", undefined, true),"speech-ellipsis":p.bt("Messages", "Messages", " - ", undefined, true)},{enabled:m}=(0,i.Z)();return/*#__PURE__*/(0,o.jsx)(l.Z,{accessibilityLabel:h[t],contextData:{event:101,component:8,element:1187},icon:/*#__PURE__*/(0,o.jsx)(a.Z,{accessibilityLabel:"",color:r?u:c,count:e,icon:t,iconSize:24,verticalNavCustomSvgBackgroundUrl:r?m?_:void 0:m?d:void 0}),onClick:n,text:h[t],type:"button"},"NotificationsButton")}},51405:(e,t,n)=>{n.d(t,{S:()=>i});let i={NEWS_HUB:1,INBOX:2}},90280:(e,t,n)=>{n.d(t,{S:()=>o,d:()=>l});var i=n(609326),s=n(864723),a=n(842909);let l=()=>(0,s.M0)().getItem(i.fb)??"",o=(e,t)=>{if(!e)return;let n=(0,a.Z)({...!!t&&{adImageUrl:t},campaignId:e});(0,s.M0)().setItem(i.fb,n)}},227984:(e,t,n)=>{n.d(t,{C:()=>l,O:()=>a});var i=n(609326),s=n(864723);let a=()=>(0,s.M0)().getItem(i.Mi)??"",l=e=>{(0,s.M0)().setItem(i.Mi,e)}},301751:(e,t,n)=>{n.d(t,{Z:()=>O});var i=n(667294),s=n(616550),a=n(883119),l=n(252071),o=n(803611),r=n(144326),c=n(282999),u=n(297728),d=n(864723),_=n(969119),p=n(383399),h=n(922664),m=n(500238),g=n(51405),f=n(121210),v=n(972420),b=n(241716),y=n(168470),w=n(847452),C=n(503546),x=n(573706),A=n(559028),S=n(512541),P=n(730212),Z=n(531408),L=n(785893);let I=({isRTL:e,isNotifFadingOut:t,anchor:n,isVerticalNavEnabled:i})=>{let s,a;let l=document.body?document.body.clientWidth:window.innerWidth-w.n,{left:o,bottom:r,width:c,height:u,right:d}=n.getBoundingClientRect();i||(e?(s=o-20,a=c/2+20-4):(s=l-d-20,a=20+c/2-4));let _=i?`
    top: ${r-u/2}px;
    left: ${o+c+20}px;
    transform: translateY(-50%);
  `:`
    top: 65px;
    ${e?"left":"right"}: ${s}px;
  `,p=i?`
    top: 50%;
    left: -6px;
    transform: rotate(45deg) translateY(-50%);
  `:`
    ${e?"left":"right"}: ${a}px;
    top: -4px;
    transform: rotate(135deg);
  `;return`
  @keyframes fadeOut {
    0% { opacity: 1; }
    100% { opacity: 0; }
  }

  #message-notif-toast{
    position: absolute;
    ${_}
    animation: ${t?"fadeOut":"none"} 1000ms;
  }

  #message-notif-toast:after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    background-color: rgb(17,17,17);
    clip-path: polygon(0% 0%, 100% 100%, 0% 100%);
    border-radius: 0 0 0 3px;
    ${p}
  }
  `};function k({conversation:e,anchor:t}){let[n,s]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),{dropdownOpen:c,conversationOpen:p}=(0,h.Z)(),m=(0,r.ZP)(),{isRTL:g}=(0,P.B)(),{logContextEvent:f}=(0,x.v)(),{enabled:v}=(0,C.Z)(),{checkExperiment:y}=(0,u.F)(),w=y("gestalt_popover_educational_dark_color").anyEnabled;if((0,_.Z)(()=>{let t=e.last_message,n=d.ZP.getItem("last_notified_message_id");t&&t.id!==n&&setTimeout(()=>{s(!0),f({event_type:13,component:14993}),d.ZP.setItem("last_notified_message_id",t.id),d.ZP.setItem("last_notified_message_timestamp",Date.now()),window.addEventListener("click",e=>{document.getElementById("message-notif-toast")?.contains(e.target)||s(!1)}),w?setTimeout(()=>{s(!1)},5e3):setTimeout(()=>{o(!0),setTimeout(()=>{o(!1),s(!1)},800)},5e3)},Z.XZ)}),!e.last_message||!n)return null;let{sender:k}=e.last_message,M=k.first_name||k.username||"",E=e.last_message.pin?m.bt("sent you a Pin", "sent you a Pin", "navbar.messageNotifications.text", undefined, true):m.bt("sent you a message", "sent you a message", "navbar.messageNotifications.text", undefined, true),T=/*#__PURE__*/(0,L.jsxs)(a.xv,{color:"light",inline:!0,children:[/*#__PURE__*/(0,L.jsxs)(a.xv,{color:"light",inline:!0,weight:"bold",children:[M," "]}),E]}),j=/*#__PURE__*/(0,L.jsxs)(a.xu,{alignItems:"center",color:w?void 0:"dark",display:"flex",flex:"none",justifyContent:"start",paddingX:4,paddingY:2,role:w?void 0:"alert",rounding:w?void 0:4,children:[/*#__PURE__*/(0,L.jsx)(a.xu,{marginEnd:3,children:/*#__PURE__*/(0,L.jsx)(A.qE,{name:M,size:"sm",src:k.image_large_url??void 0})}),T]}),O="down";return v&&(O=g?"left":"right"),/*#__PURE__*/(0,L.jsx)(a.mh,{zIndex:new a.H3([new a.Ry(b.fe)]),children:/*#__PURE__*/(0,L.jsx)(a.iP,{onTap:()=>{c(),p(e.id),s(!1),f({event_type:101,component:14993})},children:/*#__PURE__*/(0,L.jsxs)(a.xu,{id:"message-notif-toast",children:[t&&!w?/*#__PURE__*/(0,L.jsx)(S.Z,{unsafeCSS:I({isRTL:g,isNotifFadingOut:l,anchor:t,isVerticalNavEnabled:v})}):null,w?/*#__PURE__*/(0,L.jsx)(a.Li,{_experimentalVariant:"notification",anchor:t,idealDirection:O,onDismiss:()=>{},role:"dialog",size:"flexible",children:j}):j]})})})}function M(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends i.Component{constructor(...e){super(...e),M(this,"setButtonRef",e=>{let{setInboxButton:t}=this.props;this.anchor||(this.anchor=e,t(e))}),M(this,"clearBadges",()=>{let{onClearBadges:e}=this.props;e(g.S.INBOX),this.updateBrowserTabTitleCount(0)}),M(this,"handleButtonClick",e=>{let{requireAuth:t,showPanel:n,closeConversationsDropdown:i,openConversationsDropdown:s,onClick:a}=this.props;if(a?.(),t){e&&e.stopPropagation(),t();return}n?i():s(),this.clearBadges()})}componentDidMount(){this.setBrowserTabTitleCountFromProps()}componentDidUpdate(){this.setBrowserTabTitleCountFromProps()}setBrowserTabTitleCountFromProps(){let{conversationsUnseenCount:e,newsHubCount:t}=this.props;this.updateBrowserTabTitleCount(e+t)}updateBrowserTabTitleCount(e){if((0,c.L6)(this.props.location))return;let{i18n:t}=this.props,n=Math.max(e,0),i=t.bt("Pinterest", "Pinterest", " - ", undefined, true);window.document.title=n?`(${n}) ${i}`:i}render(){let{conversationsUnseenCount:e,i18n:t,showPanel:n,conversationWithUnreadMesage:i,idealTooltipDirection:s,defaultIconColor:l,selectedIconColor:o,zIndex:r}=this.props;return/*#__PURE__*/(0,L.jsxs)(a.xu,{ref:this.setButtonRef,position:"relative",children:[/*#__PURE__*/(0,L.jsx)(a.u,{accessibilityLabel:"",idealDirection:s,text:t.bt("Messages", "Messages", "navbar.conversationsButton.tooltip", undefined, true),zIndex:r||new a.H3([new a.Ry(b.fe)]),children:/*#__PURE__*/(0,L.jsx)(a.xu,{"data-test-id":"notifications-button",children:/*#__PURE__*/(0,L.jsx)(v.Z,{badgeCount:e,defaultColor:l,icon:"speech-ellipsis",onClick:this.handleButtonClick,selected:n,selectedColor:o,verticalNavCustomSvgBackgroundUrlDefaultState:y.Z.messages.default,verticalNavCustomSvgBackgroundUrlSelectedState:y.Z.messages.selected})})}),i&&/*#__PURE__*/(0,L.jsx)(k,{anchor:this.anchor,conversation:i})]})}}function T(e){let t=(0,r.ZP)(),n=(0,o.Z)(),a=(0,s.TH)(),{isAuth:g,isLimitedLogin:v}=(0,p.Z)();(0,_.Z)(()=>{g&&!v&&l.Z.create("ConversationsResource",{field_set_key:"default"}).callGet()});let{conversations:{conversationsUnseenCount:b,newsHubCount:y,showConversationsDropdown:w},dropdownClose:C,dropdownOpen:x}=(0,h.Z)(),{checkExperiment:A}=(0,u.F)(),{setInboxButton:S}=(0,f.Z)(),P=(0,m.Z)().find(e=>e.unread>0),I=(0,s.k6)(),k=(0,c.C$)(I.location),M=d.ZP.getItem("last_notified_message_timestamp"),T=M&&Date.now()-Number(M)<Z.VC,j=k&&!w&&!T&&P&&A("sg_dweb_app_start_msg_notif").anyEnabled,O=(0,i.useRef)(!0);return(0,i.useEffect)(()=>{O.current||e.onPanelChange?.(w),O.current=!1},[w]),/*#__PURE__*/(0,L.jsx)(E,{...e,closeConversationsDropdown:C,conversationsUnseenCount:b,conversationWithUnreadMesage:j?P:null,i18n:t,location:a,newsHubCount:y,openConversationsDropdown:x,requireAuth:n,setInboxButton:S,showPanel:w})}var j=n(886792);function O({idealTooltipDirection:e,defaultIconColor:t,selectedIconColor:n,zIndex:i,onClick:s,onPanelChange:a}){return/*#__PURE__*/(0,L.jsx)(j.Z,{icon:"speech-ellipsis",children:({onClearBadges:l})=>/*#__PURE__*/(0,L.jsx)(T,{defaultIconColor:t,idealTooltipDirection:e,onClearBadges:l,onClick:s,onPanelChange:a,selectedIconColor:n,zIndex:i})})}},886792:(e,t,n)=>{n.d(t,{Z:()=>C});var i,s=n(667294),a=n(883119),l=n(503546),o=n(133323),r=n(168470),c=n(167912),u=n(252071),d=n(135296),_=n(961754),p=n(296209),h=n(922664),m=n(51405),g=n(785893);let f=(0,d.Z)(p.Z);class v extends s.Component{constructor(...e){var t,n,i;super(...e),t="handleClearBadges",n=e=>{e===m.S.NEWS_HUB?(u.Z.create("NewsHubBadgeResource").callDelete({showError:!1}),this.props.updateNewsHubCount(0)):(this.props.conversationBadgeCall(),this.props.updateUnreadCount(0))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}shouldComponentUpdate(e){if(!this.props.badgeResource||!e.badgeResource)return!1;let t=this.props.badgeResource.data,n=e.badgeResource.data;return t&&n?!!["conversations_unseen_count","news_hub_count"].map(e=>t[e]!==n[e]).filter(Boolean).length:!t&&!!n}componentDidUpdate(){let{badgeResource:e,updateNewsHubCount:t,updateUnreadCount:n}=this.props;if(!(e&&e.data))return;let i=f(e.data);n(i.conversationsUnseenCount),t(i.newsHubCount)}render(){let{children:e}=this.props;return e({onClearBadges:this.handleClearBadges})}}function b({conversationBadgeCall:e,children:t}){let n=(0,_.Z)({name:"NewsHubBadgeResource",noCache:!0}),{updateNewsHubCount:i,updateUnreadCount:s}=(0,h.Z)();return/*#__PURE__*/(0,g.jsx)(v,{badgeResource:n,conversationBadgeCall:e,updateNewsHubCount:i,updateUnreadCount:s,children:t})}let y=()=>{let e=void 0!==i?i:i=n(115701),[t]=(0,c.useMutation)(e);return async()=>await new Promise((e,n)=>{t({variables:{},onCompleted:(t,i)=>{i&&n(i[0]),e(t)},onError:e=>n(e)})})};function w({children:e}){return/*#__PURE__*/(0,g.jsx)(b,{conversationBadgeCall:y(),children:e})}function C({icon:e,children:t}){let[n,i]=(0,s.useState)(!1),{enabled:c}=(0,l.Z)();return((0,s.useEffect)(()=>{i(!0)},[]),n)?/*#__PURE__*/(0,g.jsx)(w,{children:t}):/*#__PURE__*/(0,g.jsx)(a.xu,{paddingX:1,children:/*#__PURE__*/(0,g.jsx)(a.kC,{alignItems:"center",height:48,justifyContent:"center",width:48,children:c?/*#__PURE__*/(0,g.jsx)(o.d,{svgBackgroundImageUrl:"speech-ellipsis"===e?r.Z.messages.default:r.Z.notifications.default}):/*#__PURE__*/(0,g.jsx)(a.JO,{accessibilityLabel:"",color:"subtle",icon:e,size:24})})})}},531408:(e,t,n)=>{n.d(t,{VC:()=>f,XZ:()=>g,ZP:()=>v});var i=n(616550),s=n(883119),a=n(252071),l=n(559028),o=n(476198),r=n(144326),c=n(282999),u=n(864723),d=n(901450),_=n(410150),p=n(969119),h=n(383399),m=n(785893);let g=2e3,f=864e5;function v(){let e=(0,r.ZP)(),t=(0,h.Z)(),{isAuth:n,isLimitedLogin:v}=t,b=t.isAuth?t?.avatar_color_index:void 0,{showToast:y}=(0,d.F9)(),w=(0,i.k6)(),C=(0,c.C$)(w.location),x=(0,_.HG)();return(0,p.Z)(()=>{let t=async()=>{let t=a.Z.create("ConversationsResource",{field_set_key:"default"}),n=(await t.callGet()).resource_response.data.find(e=>e.unread>0),i=u.ZP.getItem("last_notified_message_timestamp"),r=i&&Date.now()-Number(i)<f,c=n&&C&&!r&&n.last_message,d=u.ZP.getItem("last_notified_message_id");if(c&&c.id!==d){u.ZP.setItem("last_notified_message_id",c.id),u.ZP.setItem("last_notified_message_timestamp",Date.now());let{sender:t}=c,i=t.first_name||t.username||"",a=c.pin?e.bt("sent you a Pin", "sent you a Pin", "navbar.messageNotifications.text", undefined, true):e.bt("sent you a message", "sent you a message", "navbar.messageNotifications.text", undefined, true),r=/*#__PURE__*/(0,m.jsxs)(s.xv,{inline:!0,children:[/*#__PURE__*/(0,m.jsxs)(s.xv,{inline:!0,weight:"bold",children:[i," "]}),a]});setTimeout(()=>{y(({hideToast:s})=>/*#__PURE__*/(0,m.jsx)(o.Z,{duration:5e3,onHide:s,primaryAction:{accessibilityLabel:e.bt("Reply to the message", "Reply to the message", "NotificationToast.replyButton.accessibilityLabel", undefined, true),label:e.bt("Reply", "Reply", "NotificationToast.replyButton.buttonText", undefined, true),onClick:()=>{w.push(`/conversation/${n.id}`),s()}},text:r,thumbnail:{avatar:/*#__PURE__*/(0,m.jsx)(l.qE,{color:b,name:i,size:"sm",src:t.image_large_url})}}))},g)}};!n||v||x||t()}),null}},599141:(e,t,n)=>{function i(e,t){return t?`${e}?${new URLSearchParams(t).toString()}`:e}function s(e){return i("/admin/",e)}function a(e){return i("/admin/oauth/logout/",e)}function l(e){return i("/today/",e)}n.d(t,{HF:()=>s,Kn:()=>a,tG:()=>l})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/23143.en_GB-cb77cb294a864d2c.mjs.map